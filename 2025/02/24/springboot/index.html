<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Springboot启动  首先需要@SpringBootApplication这个注解。 通过SpringApplication.run来启动。 阶段  2  自己写的整体结构：  首先看启动函数  点进去之后是这个：  这个时候就要分成两部分了，一个是 new SpringApplication(primarySources) 另一个是 .run() new springApplication">
<meta property="og:type" content="article">
<meta property="og:title" content="springboot">
<meta property="og:url" content="http://example.com/2025/02/24/springboot/index.html">
<meta property="og:site_name" content="Zhang&#39;Blog">
<meta property="og:description" content="Springboot启动  首先需要@SpringBootApplication这个注解。 通过SpringApplication.run来启动。 阶段  2  自己写的整体结构：  首先看启动函数  点进去之后是这个：  这个时候就要分成两部分了，一个是 new SpringApplication(primarySources) 另一个是 .run() new springApplication">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bc74e9d0e0a243d403add7.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bc7543d0e0a243d403ae21.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bc75f0d0e0a243d403aeec.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd2b64d0e0a243d4043f9d.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd2a29d0e0a243d4043f07.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd2a4cd0e0a243d4043f1c.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd2b26d0e0a243d4043f85.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd2d7dd0e0a243d40440e5.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd31e1d0e0a243d40442a4.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd3225d0e0a243d40442bd.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd330cd0e0a243d404430a.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bd3456d0e0a243d40443a5.png">
<meta property="og:image" content="c:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20250225110644414.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bf0db4d0e0a243d406267e.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bf0e50d0e0a243d406271c.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bf0ebfd0e0a243d406278b.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67bf115fd0e0a243d40629cf.png">
<meta property="article:published_time" content="2025-02-24T07:21:43.000Z">
<meta property="article:modified_time" content="2025-02-26T14:05:55.646Z">
<meta property="article:author" content="ZhangYuHao">
<meta property="article:tag" content="springboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic1.imgdb.cn/item/67bc74e9d0e0a243d403add7.png">


<link rel="canonical" href="http://example.com/2025/02/24/springboot/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2025/02/24/springboot/","path":"2025/02/24/springboot/","title":"springboot"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>springboot | Zhang'Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Zhang'Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Springboot"><span class="nav-number">1.</span> <span class="nav-text">Springboot</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8"><span class="nav-number">1.1.</span> <span class="nav-text">启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84"><span class="nav-number">1.2.</span> <span class="nav-text">自己写的</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#new-springApplication"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">new springApplication()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8Crun%EF%BC%88%EF%BC%89"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">运行run（）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E-this-refreshContext-context"><span class="nav-number">1.2.0.2.1.</span> <span class="nav-text">关于 this.refreshContext(context)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9D%9F"><span class="nav-number">1.2.0.3.</span> <span class="nav-text">结束</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E7%82%B9"><span class="nav-number">1.3.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.4.</span> <span class="nav-text">核心注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringBootApplication"><span class="nav-number">1.4.1.</span> <span class="nav-text">@SpringBootApplication</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EnableAutoConfiguration"><span class="nav-number">1.4.2.</span> <span class="nav-text">@EnableAutoConfiguration</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot-%E7%9A%84%E5%90%AF%E5%8A%A8%E5%99%A8%EF%BC%88starters%EF%BC%89"><span class="nav-number">1.5.</span> <span class="nav-text">Spring Boot 的启动器（starters）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot%E7%9A%84%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">1.6.</span> <span class="nav-text">Spring Boot的自动配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">1.6.0.1.</span> <span class="nav-text">工作原理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E6%94%AF%E6%8C%81%E7%9A%84%E5%B5%8C%E5%85%A5web%E5%AE%B9%E5%99%A8"><span class="nav-number">1.7.</span> <span class="nav-text">SpringBoot支持的嵌入web容器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8Spring%E4%B8%AD%E5%AE%9A%E4%B9%89%E5%92%8C%E8%AF%BB%E5%8F%96%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%EF%BC%9F"><span class="nav-number">1.8.</span> <span class="nav-text">如何在Spring中定义和读取定义配置？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot-%E6%89%93%E6%88%90%E7%9A%84jar-%E5%92%8C%E6%99%AE%E9%80%9A%E7%9A%84-jar%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="nav-number">1.9.</span> <span class="nav-text">Spring Boot 打成的jar 和普通的 jar有什么区别？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E6%89%93%E5%8C%85%E6%88%90-Spring-Boot-jar%E5%8C%85"><span class="nav-number">1.9.0.1.</span> <span class="nav-text">如何打包成 Spring Boot jar包</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E5%92%8C%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82"><span class="nav-number">1.10.</span> <span class="nav-text">连接数和处理请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%EF%BC%9F"><span class="nav-number">1.11.</span> <span class="nav-text">SpringBoot如何处理跨域请求？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E4%B8%AD%E5%AE%9E%E7%8E%B0%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%9F"><span class="nav-number">1.12.</span> <span class="nav-text">SpringBoot中实现拦截器的操作？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="nav-number">1.13.</span> <span class="nav-text">定时任务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot-Actuator%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-number">1.14.</span> <span class="nav-text">SpringBoot Actuator是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringBoot%E4%B8%AD%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86%EF%BC%9F"><span class="nav-number">1.15.</span> <span class="nav-text">SpringBoot中如何实现异步处理？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Boot-%E7%9A%84%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6"><span class="nav-number">1.16.</span> <span class="nav-text">Spring Boot 的事件机制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SpringBoot%E4%B8%AD%E7%9A%84%E5%86%85%E7%BD%AE%E4%BA%8B%E4%BB%B6"><span class="nav-number">1.16.0.1.</span> <span class="nav-text">SpringBoot中的内置事件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8SpringBoot%E5%90%AF%E5%8A%A8%E6%97%B6%E6%89%A7%E8%A1%8C%E7%89%B9%E5%AE%9A%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%9F"><span class="nav-number">1.17.</span> <span class="nav-text">如何在SpringBoot启动时执行特定的代码？</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhangYuHao"
      src="/images/111.png">
  <p class="site-author-name" itemprop="name">ZhangYuHao</p>
  <div class="site-description" itemprop="description">一个小人物的个人博客</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/2567821933" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;2567821933" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:103903Zyh@gmail.com" title="E-Mail → mailto:103903Zyh@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/02/24/springboot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/111.png">
      <meta itemprop="name" content="ZhangYuHao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang'Blog">
      <meta itemprop="description" content="一个小人物的个人博客">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="springboot | Zhang'Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          springboot
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-02-24 15:21:43" itemprop="dateCreated datePublished" datetime="2025-02-24T15:21:43+08:00">2025-02-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-26 22:05:55" itemprop="dateModified" datetime="2025-02-26T22:05:55+08:00">2025-02-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Springboot"><a href="#Springboot" class="headerlink" title="Springboot"></a>Springboot</h1><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><img src="https://pic1.imgdb.cn/item/67bc74e9d0e0a243d403add7.png" alt="image.png">

<p>首先需要@SpringBootApplication这个注解。</p>
<p>通过SpringApplication.run来启动。</p>
<p>阶段</p>
<p><img src="https://pic1.imgdb.cn/item/67bc7543d0e0a243d403ae21.png"></p>
<p>2</p>
<p><img src="https://pic1.imgdb.cn/item/67bc75f0d0e0a243d403aeec.png"></p>
<h2 id="自己写的"><a href="#自己写的" class="headerlink" title="自己写的"></a>自己写的</h2><p>整体结构：</p>
<p><img src="https://pic1.imgdb.cn/item/67bd2b64d0e0a243d4043f9d.png"></p>
<p>首先看启动函数</p>
<p><img src="https://pic1.imgdb.cn/item/67bd2a29d0e0a243d4043f07.png"></p>
<p>点进去之后是这个：</p>
<p><img src="https://pic1.imgdb.cn/item/67bd2a4cd0e0a243d4043f1c.png"></p>
<p>这个时候就要分成两部分了，一个是 <code>new SpringApplication(primarySources)</code> 另一个是 <code>.run()</code></p>
<h4 id="new-springApplication"><a href="#new-springApplication" class="headerlink" title="new springApplication()"></a>new springApplication()</h4><p>在这个构造器里面，通常是用来初始化的。</p>
<p>具体构造是：</p>
<p><img src="https://pic1.imgdb.cn/item/67bd2b26d0e0a243d4043f85.png"></p>
<p>这里我把代码复制下来了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">SpringApplication</span><span class="params">(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sources = <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>();</span><br><span class="line">        <span class="built_in">this</span>.bannerMode = Mode.CONSOLE;</span><br><span class="line">        <span class="built_in">this</span>.logStartupInfo = <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">this</span>.addCommandLineProperties = <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">this</span>.addConversionService = <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">this</span>.headless = <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">this</span>.registerShutdownHook = <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">this</span>.additionalProfiles = Collections.emptySet();</span><br><span class="line">        <span class="built_in">this</span>.isCustomEnvironment = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">this</span>.lazyInitialization = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">this</span>.applicationContextFactory = ApplicationContextFactory.DEFAULT;</span><br><span class="line">        <span class="built_in">this</span>.applicationStartup = ApplicationStartup.DEFAULT;</span><br><span class="line">        <span class="built_in">this</span>.resourceLoader = resourceLoader;</span><br><span class="line">        Assert.notNull(primarySources, <span class="string">&quot;PrimarySources must not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.primarySources = <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>(Arrays.asList(primarySources)); <span class="comment">// 将启动类放入primarySources（初级来源）</span></span><br><span class="line">        <span class="built_in">this</span>.webApplicationType = WebApplicationType.deduceFromClasspath(); <span class="comment">// 推算当前web的类型</span></span><br><span class="line">        <span class="built_in">this</span>.bootstrapRegistryInitializers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>(<span class="built_in">this</span>.getSpringFactoriesInstances(BootstrapRegistryInitializer.class)); </span><br><span class="line">        <span class="built_in">this</span>.setInitializers(<span class="built_in">this</span>.getSpringFactoriesInstances(ApplicationContextInitializer.class));<span class="comment">// 读取初始化器</span></span><br><span class="line">        <span class="built_in">this</span>.setListeners(<span class="built_in">this</span>.getSpringFactoriesInstances(ApplicationListener.class)); <span class="comment">//读取监听器</span></span><br><span class="line">        <span class="built_in">this</span>.mainApplicationClass = <span class="built_in">this</span>.deduceMainApplicationClass(); <span class="comment">// 将main方法所在的类放入mainApplicationClass。</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>总结：整个过程就是初始化阶段，扩展，和保存main方法。</p>
<p>可扩展接口：</p>
<ul>
<li>ApplicationContextInitializers； 初始化器</li>
<li>ApplicationListener； 监听器</li>
</ul>
<h4 id="运行run（）"><a href="#运行run（）" class="headerlink" title="运行run（）"></a>运行run（）</h4><p>运行run方法的话会进入这个函数</p>
<p><img src="https://pic1.imgdb.cn/item/67bd2d7dd0e0a243d40440e5.png"></p>
<p>这里把run()方法的实现复制下来了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ConfigurableApplicationContext <span class="title function_">run</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.nanoTime(); <span class="comment">// 记录启动开始时间</span></span><br><span class="line">    <span class="type">DefaultBootstrapContext</span> <span class="variable">bootstrapContext</span> <span class="operator">=</span> <span class="built_in">this</span>.createBootstrapContext(); <span class="comment">// 创建引导上下文（BootstrapContext）</span></span><br><span class="line">    <span class="type">ConfigurableApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// 初始化Spring应用上下文</span></span><br><span class="line">    <span class="built_in">this</span>.configureHeadlessProperty(); <span class="comment">// 配置Headless模式（无图形界面模式）</span></span><br><span class="line">    <span class="type">SpringApplicationRunListeners</span> <span class="variable">listeners</span> <span class="operator">=</span> <span class="built_in">this</span>.getRunListeners(args); <span class="comment">// 获取SpringApplicationRunListeners，用于发布启动事件</span></span><br><span class="line">    listeners.starting(bootstrapContext, <span class="built_in">this</span>.mainApplicationClass); <span class="comment">// 发布应用启动事件</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">ApplicationArguments</span> <span class="variable">applicationArguments</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultApplicationArguments</span>(args); <span class="comment">// 封装命令行参数</span></span><br><span class="line">        <span class="comment">// 准备环境（读取配置文件、环境变量等），并发布环境准备事件</span></span><br><span class="line">        <span class="type">ConfigurableEnvironment</span> <span class="variable">environment</span> <span class="operator">=</span> <span class="built_in">this</span>.prepareEnvironment(listeners, bootstrapContext, applicationArguments);</span><br><span class="line">        <span class="built_in">this</span>.configureIgnoreBeanInfo(environment); <span class="comment">// 配置需要忽略的Bean信息</span></span><br><span class="line">        <span class="type">Banner</span> <span class="variable">printedBanner</span> <span class="operator">=</span> <span class="built_in">this</span>.printBanner(environment); <span class="comment">// 打印Banner（启动时的Logo）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建Spring应用上下文（AnnotationConfigApplicationContext或AnnotationConfigServletWebServerApplicationContext）</span></span><br><span class="line">        context = <span class="built_in">this</span>.createApplicationContext();</span><br><span class="line">        context.setApplicationStartup(<span class="built_in">this</span>.applicationStartup); <span class="comment">// 设置应用启动指标（用于性能监控）</span></span><br><span class="line">        <span class="comment">// 准备应用上下文：设置环境、注册BeanDefinition、发布上下文准备事件</span></span><br><span class="line">        <span class="built_in">this</span>.prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner);</span><br><span class="line">        <span class="built_in">this</span>.refreshContext(context); <span class="comment">// 刷新上下文（加载IOC容器，初始化Bean）</span></span><br><span class="line">        <span class="built_in">this</span>.afterRefresh(context, applicationArguments); <span class="comment">// 刷新后的扩展点（可用于自定义逻辑）</span></span><br><span class="line">        <span class="type">Duration</span> <span class="variable">timeTakenToStartup</span> <span class="operator">=</span> Duration.ofNanos(System.nanoTime() - startTime); <span class="comment">// 计算启动耗时</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.logStartupInfo) &#123;</span><br><span class="line">            <span class="comment">// 打印启动信息（如启动时间、应用名称等）</span></span><br><span class="line">            (<span class="keyword">new</span> <span class="title class_">StartupInfoLogger</span>(<span class="built_in">this</span>.mainApplicationClass)).logStarted(<span class="built_in">this</span>.getApplicationLog(), timeTakenToStartup);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        listeners.started(context, timeTakenToStartup); <span class="comment">// 发布应用启动完成事件</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">this</span>.callRunners(context, applicationArguments); <span class="comment">// 调用ApplicationRunner和CommandLineRunner</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable var12) &#123;</span><br><span class="line">        <span class="built_in">this</span>.handleRunFailure(context, var12, listeners); <span class="comment">// 处理启动失败</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(var12);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">Duration</span> <span class="variable">timeTakenToReady</span> <span class="operator">=</span> Duration.ofNanos(System.nanoTime() - startTime); <span class="comment">// 计算应用就绪耗时</span></span><br><span class="line">        listeners.ready(context, timeTakenToReady); <span class="comment">// 发布应用就绪事件</span></span><br><span class="line">        <span class="keyword">return</span> context; <span class="comment">// 返回初始化完成的Spring应用上下文</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable var11) &#123;</span><br><span class="line">        <span class="built_in">this</span>.handleRunFailure(context, var11, (SpringApplicationRunListeners)<span class="literal">null</span>); <span class="comment">// 处理就绪失败</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(var11);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="关于-this-refreshContext-context"><a href="#关于-this-refreshContext-context" class="headerlink" title="关于 this.refreshContext(context)"></a>关于 this.refreshContext(context)</h5><p>点进去的话是这个：</p>
<p><img src="https://pic1.imgdb.cn/item/67bd31e1d0e0a243d40442a4.png"></p>
<p>最主要的还是底下的 <code>this.refresh(context)</code></p>
<p><img src="https://pic1.imgdb.cn/item/67bd3225d0e0a243d40442bd.png"></p>
<p>这里面就是加载IOC容器，类似Spring的加载</p>
<p><img src="https://pic1.imgdb.cn/item/67bd330cd0e0a243d404430a.png"></p>
<p>在这里会解析自动配置类，是在SpringIOC容器中加载。</p>
<p><img src="https://pic1.imgdb.cn/item/67bd3456d0e0a243d40443a5.png"></p>
<h4 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h4><p><img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20250225110644414.png" alt="image-20250225110644414"></p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul>
<li><strong>简化配置</strong>： SpringBoot通过自动配置（<code>@EnableAutoconfig</code>），根据项目中的类路径依赖，环境变量等自动为应用配置适当的Spring模块，避免了大量的XML</li>
<li><strong>内置服务器</strong>： Springboot内置了 Tomcat，Jetty, Undertow等服务器，应用程序可以直接通过 java -jar 启动，而不需要部署到外部的web服务器中。</li>
<li><strong>快速开发</strong>： SpringBoot提供了开箱即用的项目结构，默认资源配置和依赖管理，支持快速原型开发。它还提供了许多常用的开发工具</li>
<li><strong>独立运行</strong>: Springboot应用打包成一个独立的jar或war包，可以通过命令直接运行，简化了部署过程。</li>
</ul>
<h2 id="核心注解"><a href="#核心注解" class="headerlink" title="核心注解"></a>核心注解</h2><h3 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h3><p>@SpringBootApplication 是Spring boot的核心注解，它是一下三个注解的组合：</p>
<ul>
<li>@configuration: 表示该类是Spring配置类</li>
<li>@EnableAutoConfigruation: 启用Springboot的自动配置功能。</li>
<li>@ComponenScan: 自动扫描当前包及其子类包带有的Spring注解类</li>
</ul>
<h3 id="EnableAutoConfiguration"><a href="#EnableAutoConfiguration" class="headerlink" title="@EnableAutoConfiguration"></a>@EnableAutoConfiguration</h3><p>@EnableAutoConfiguration 是SpringBoot的自动配置核心注解，它会根据类路径中的依赖自动配置Spring应用中的各种组件。</p>
<p>例子：</p>
<p>如果应用中引入了 <code>spring-boot-starter-web</code> 依赖，SpringBoot会自动为应用配置嵌入Tomcat服务器，MVC框架等。</p>
<h2 id="Spring-Boot-的启动器（starters）"><a href="#Spring-Boot-的启动器（starters）" class="headerlink" title="Spring Boot 的启动器（starters）"></a>Spring Boot 的启动器（starters）</h2><p>Spring boot提供了一系列 <strong>Starters(启动器)</strong> ，这些启动器是预定的依赖包集合，涵盖了常用的Spring和第三方库。通过引入一个简单的启动器依赖，开发者可以快速整合需要的功能。</p>
<p>常用的starter</p>
<ul>
<li><code>spring-boot-starter-web</code> : 用于构建Web应用，包含了springMVC和嵌入式Tomcat。</li>
<li><code>spring-boot-starter-data-jpa</code>: 用于集成Spring Data JPA 和 Hibernate, 简化数据库访问</li>
<li><code>spring-boot-starter-security</code>:  用于集成Spring Security，实现身份验证和授权。</li>
<li><code>spring-boot-starter-thymeleaf</code>: 集成Thymeleaf模版引擎，适用于MVC模式下的视图层渲染。</li>
</ul>
<h2 id="Spring-Boot的自动配置"><a href="#Spring-Boot的自动配置" class="headerlink" title="Spring Boot的自动配置"></a>Spring Boot的自动配置</h2><p>SpringBoot自动配置机制依赖于 <code>spring-boot-autoconfigure</code> 模块，他会根据classpath下的 **META&#x2F;INF&#x2F;spring.factories **配置相关的Bean服务。</p>
<h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><p>Springboot自动配置的核心原理是 <code>EnableAutoConfiguration</code> 注解，根据classpath下的 **META&#x2F;INF&#x2F;spring.factories **配置相关的Bean服务。</p>
<p>这个注解包含了<code>@Import(AutoConfigurationSelector.class)</code>这个注解，通过这个注解</p>
<p>它根据项目中的依赖和 <code>application.properties</code> 和<code>application.yml</code>文件中的配置，判断需要加载哪些Bean，通过条件注解（如 @ConditionalOnClass、 @ConditionalOnMissingBean等),SpringBoot可以有选择的加载相关配置。</p>
<h2 id="SpringBoot支持的嵌入web容器"><a href="#SpringBoot支持的嵌入web容器" class="headerlink" title="SpringBoot支持的嵌入web容器"></a>SpringBoot支持的嵌入web容器</h2><ul>
<li>Tomcat(默认)<ul>
<li>Tomcat是SpringBoot默认的嵌入式Web容器。Tomcat是一种轻量级，广泛使用的Servlet容器，Spring会自动将Tomcat内嵌到应用程序中。</li>
</ul>
</li>
<li>Jetty：<ul>
<li>Jetty是一个高效的Web服务器和Servlet容器，通常用于嵌入式系统或资源占用较敏感的环境。它比Tomcat更加轻量，并且适合长连接应用（如WebSocket，Comet)</li>
</ul>
</li>
<li>Undertow:<ul>
<li>Undertow 是一个轻量级的高性能Web服务器和Servlet服务器，适合用于处理高并发的Http请求，它支持异步IO和HTTP2，是一种灵活性能出色的选择。</li>
</ul>
</li>
<li>Netty（仅限WebFlux)<ul>
<li>对于使用SpringWebFlux的响应式Web应用，SpringBoot支持Netty作为嵌入式Web容器，Netty是一个非阻塞的异步事件驱动框架，非常适合响应式编程模型和高并发应用。</li>
</ul>
</li>
</ul>
<h2 id="如何在Spring中定义和读取定义配置？"><a href="#如何在Spring中定义和读取定义配置？" class="headerlink" title="如何在Spring中定义和读取定义配置？"></a>如何在Spring中定义和读取定义配置？</h2><p><strong>1. @Value</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;my.custom.property&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String myProperty;</span><br></pre></td></tr></table></figure>

<p><strong>2. @ConfigurationProperties</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;my.custom&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCustomProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String property;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>3. Environment接口</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Environment env;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">someMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> env.getProperty(<span class="string">&quot;my.custom.property&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Spring-Boot-打成的jar-和普通的-jar有什么区别？"><a href="#Spring-Boot-打成的jar-和普通的-jar有什么区别？" class="headerlink" title="Spring Boot 打成的jar 和普通的 jar有什么区别？"></a>Spring Boot 打成的jar 和普通的 jar有什么区别？</h2><p>Spring boot 打成的jar包不仅包含了应用程序的源代码和依赖库，还包含了程序运行需要的配置，脚本和服务依赖（内嵌的服务器），<strong>可以直接部署运行</strong></p>
<p>普通jar包，只有源码和依赖，通常需要外部的服务器或容器来运行。</p>
<h4 id="如何打包成-Spring-Boot-jar包"><a href="#如何打包成-Spring-Boot-jar包" class="headerlink" title="如何打包成 Spring Boot jar包"></a>如何打包成 Spring Boot jar包</h4><p>通常可以通过这个插件来进行配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意： 主要是springboot内嵌了服务器（tomcat），所以打包的时候会带上，所以只需要有个jdk就可以运行这个jar包了。而普通的需要启动tomcat才能运行这个jar包。</p>
<h2 id="连接数和处理请求"><a href="#连接数和处理请求" class="headerlink" title="连接数和处理请求"></a>连接数和处理请求</h2><p>最大连接数8192 + 100等待， 处理请求 200</p>
<h2 id="SpringBoot如何处理跨域请求？"><a href="#SpringBoot如何处理跨域请求？" class="headerlink" title="SpringBoot如何处理跨域请求？"></a>SpringBoot如何处理跨域请求？</h2><p>CORS： （Cross-Origin Resource Sharing）</p>
<p><strong>1. 配置局部CORS</strong>， 需要使用<code>@CrossOrigin</code> 这个注解，只需要写在Controller上，参数是要跨域的地址。</p>
<p>具体实现：</p>
<p><img src="https://pic1.imgdb.cn/item/67bf0db4d0e0a243d406267e.png"></p>
<p><strong>2. 配置全局CORS</strong>， 通过实现WebMvcConfigurer，来配置跨域请求</p>
<p>具体实现：</p>
<p><img src="https://pic1.imgdb.cn/item/67bf0e50d0e0a243d406271c.png"></p>
<p><strong>3. 还可以添加CorsFilter</strong> 来处理跨域请求。（可以自定义Filter，但是没必要）</p>
<p>具体实现：</p>
<p><img src="https://pic1.imgdb.cn/item/67bf0ebfd0e0a243d406278b.png"></p>
<p>注意：</p>
<ol>
<li>跨域成功后，响应会出现一个跨域成功的响应头。</li>
<li><strong>CorsFilter -&gt; Interceptor -&gt; CorsInterceptor</strong> ，这是执行顺序，当请求在进入Cors前被拦截的话，会报跨域错误，可以使用CorsFilter解决。</li>
</ol>
<h2 id="SpringBoot中实现拦截器的操作？"><a href="#SpringBoot中实现拦截器的操作？" class="headerlink" title="SpringBoot中实现拦截器的操作？"></a>SpringBoot中实现拦截器的操作？</h2><ol>
<li>创建拦截器类，继承HandlerInterceptor接口。</li>
<li>在配置类，WebMvcConfigurer中注册拦截器addInterceptors。</li>
</ol>
<p><strong>拦截器方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;面试鸭请求开始前&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">true</span>;  <span class="comment">// 返回 true 继续处理，false 则拦截请求</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;面试鸭请求后&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception exception)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;面试鸭请求完成&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注册拦截器</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">       registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">MyInterceptor</span>()).addPathPatterns(<span class="string">&quot;/api/**&quot;</span>);  <span class="comment">// 拦截指定路径</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>关于过滤器</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">// 初始化代码</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">// 过滤逻辑</span></span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 销毁代码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>关于过滤器和拦截器的执行顺序</strong></p>
<p><img src="https://pic1.imgdb.cn/item/67bf115fd0e0a243d40629cf.png"></p>
<p>可以通过@Order注解或配置类中加入的顺序定义执行顺序。</p>
<p><strong>区别对比：</strong></p>
<ol>
<li>执行时机<ul>
<li>拦截器在SpringMVC中处理请求之前或之后执行，主要拦截控制方法。</li>
<li>过滤器则在Servlet层面工作，它拦截了所有HTTP请求，不局限于SpringMVC</li>
</ul>
</li>
<li>应用场景<ul>
<li>拦截器适用于处理与控制器相关的逻辑，例如权限校验，日志记录等</li>
<li>过滤器适合处理所有HTTP请求相关操作，如字符编码设置，CORS处理等</li>
</ul>
</li>
<li>优先级<ul>
<li>过滤器的执行优先级高于拦截器，过滤器先于拦截器处理请求。</li>
</ul>
</li>
</ol>
<h2 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h2><h2 id="SpringBoot-Actuator是什么？"><a href="#SpringBoot-Actuator是什么？" class="headerlink" title="SpringBoot Actuator是什么？"></a>SpringBoot Actuator是什么？</h2><p>actuator 执行器，驱动器</p>
<p>依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Spring Actuator 是Spring Boot的一个子项目，提供了一套用于监控和管理SpringBoot应用程序的的功能。这些功能包括不但限于<strong>应用程序健康检查，指标收集，应用程序信息和环境配置等</strong>。Actuator通过提供多种可定制的端点来实现这些功能，这些端点可以通过HTTP，JMX来进行访问。具有简便性，可扩展性，安全性，易于集成。</p>
<h2 id="SpringBoot中如何实现异步处理？"><a href="#SpringBoot中如何实现异步处理？" class="headerlink" title="SpringBoot中如何实现异步处理？"></a>SpringBoot中如何实现异步处理？</h2><p><strong>1. <code>@Async</code> 注解</strong></p>
<p>它是Spring提供的注解，通过这个注解指定某个方法在另一个线程中异步执行。</p>
<p>注意：需要再启动类中配置 <code>@EableAsync</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">asyncMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 异步执行的代码</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Executing method asynchronously. &quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>2. 使用CompletableFuture</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> CompletableFuture&lt;String&gt; <span class="title function_">asyncMethodWithReturn</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 异步执行的代码</span></span><br><span class="line">        <span class="keyword">return</span> CompletableFuture.completedFuture(<span class="string">&quot;Hello, mianshiya.com!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>3. 使用定时任务</strong></p>
<p><code>@Scheduled</code></p>
<p>注意：同样需要再主类中，设置<code>@EableScheduled</code></p>
<p><strong>4. 使用线程池</strong></p>
<p>可以将任务显示的提交到线程池中，进行任务的异步处理，推荐使用自定义线程池，可以根据项目和任务的情况设置对应的线程池参数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置代码</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = &quot;taskExecutor&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Executor <span class="title function_">taskExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolTaskExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolTaskExecutor</span>();</span><br><span class="line">        executor.setCorePoolSize(<span class="number">2</span>); <span class="comment">// 执行者</span></span><br><span class="line">        executor.setMaxPoolSize(<span class="number">2</span>);</span><br><span class="line">        executor.setQueueCapacity(<span class="number">500</span>);</span><br><span class="line">        executor.setThreadNamePrefix(<span class="string">&quot;Thread-&quot;</span>);</span><br><span class="line">        executor.initialize();</span><br><span class="line">        <span class="keyword">return</span> executor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>线程池的注意事项</strong></p>
<ul>
<li>合理配置线程池：根据应用的具体需求，合理的配置线程池的大小和其他参数，，以保证系统的性能和稳定性。（即使使用了@Async，本质也是利用线程池执行异步任务）</li>
<li>注意异常处理：任务中的异常处理需要关注，避免出现异常未捕获直接丢失且没有发现的情况。</li>
</ul>
<h2 id="Spring-Boot-的事件机制"><a href="#Spring-Boot-的事件机制" class="headerlink" title="Spring Boot 的事件机制"></a>Spring Boot 的事件机制</h2><p>通过 发布-订阅模式</p>
<p>作用：</p>
<ul>
<li>解耦： 通过事件机制，可以在不同组件之间传递消息，而不需要他们之间有直接的依赖关系，从而提高了代码的可维护性和扩展性。</li>
<li>异步处理： 某些事件可以异步处理，从而提高应用程序的响应速度和性能。</li>
<li>状态通知：通过事件，可以通知应用应用程序的不同部分发生某些特定的状态变化。</li>
</ul>
<p><strong>具体</strong></p>
<p>基于 <strong>观察者模式实现</strong> 。</p>
<p>需要： 事件（继承了ApplicationEvent）， 事件发布者（ApplicationEventPublisher）， 监听器（@EventListener）</p>
<p>自定义实现：</p>
<p><strong>事件定义</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCustomEvent</span> <span class="keyword">extends</span> <span class="title class_">ApplicationEvent</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">MyCustomEvent</span><span class="params">(Object source, String message)</span> &#123;</span><br><span class="line">       <span class="built_in">super</span>(source);</span><br><span class="line">       <span class="built_in">this</span>.message = message;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> message;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>发布事件</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEventPublisher</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> ApplicationEventPublisher eventPublisher; <span class="comment">// 直接依赖注入</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">publishEvent</span><span class="params">(String message)</span> &#123;</span><br><span class="line">       <span class="type">MyCustomEvent</span> <span class="variable">event</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCustomEvent</span>(<span class="built_in">this</span>, message);</span><br><span class="line">       eventPublisher.publishEvent(event);发布</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>监听事件</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEventListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span> <span class="comment">// 表示是异步处理</span></span><br><span class="line">   <span class="meta">@EventListener</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleCustomEvent</span><span class="params">(MyCustomEvent event)</span> &#123; <span class="comment">// 参数是要监听的事件</span></span><br><span class="line">       System.out.println(<span class="string">&quot;mianshiya Received event - &quot;</span> + event.getMessage());</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="SpringBoot中的内置事件"><a href="#SpringBoot中的内置事件" class="headerlink" title="SpringBoot中的内置事件"></a>SpringBoot中的内置事件</h4><ul>
<li>ApplicationStartingEvent: 在运行时发布</li>
<li>ApplicationEnvironmentPrepareEvent：在环境信息已准备但上下文还未创建时发布</li>
<li>ApplicationPreparedEvent：在上下文创建完成但未刷新是发布。</li>
<li>ApplicationRedyEvent：在任何相关的代码都已准备好运行时发布。</li>
<li>ApplicationFailedEvent：在启动时遇到错误是发布。</li>
</ul>
<h2 id="如何在SpringBoot启动时执行特定的代码？"><a href="#如何在SpringBoot启动时执行特定的代码？" class="headerlink" title="如何在SpringBoot启动时执行特定的代码？"></a>如何在SpringBoot启动时执行特定的代码？</h2><p>答： 一共有六种</p>
<p><strong>1. 实现接口 CommandLineRunner接口</strong></p>
<p>command 命令  line 线 runner 跑步者</p>
<p>实现这个接口后，用于在SpringBoot应用启动完成后，执行特定的代码逻辑，具体可以看springboot的启动流程。可以有多个实现类，通过 @Order来实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCommandLineRunner</span> <span class="keyword">implements</span> <span class="title class_">CommandLineRunner</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;www.mianshiya.com: Application started!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>2. 实现ApplicationRunner接口</strong></p>
<p>ApplicationRunner接口和CommandLineRunner接口类似，不过有一个ApplicationArguments参数，就是应用启动参数。</p>
<p>具体代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(2)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplicationRunner</span> <span class="keyword">implements</span> <span class="title class_">ApplicationRunner</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ApplicationRunner: mianshiya.com started with arguments: &quot;</span> + args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3. 使用@PostConstruct注解</strong></p>
<p>Spring容器初始化bean后，会执行初始化方法。这个注解适用于需要在bean初始化后立即执行的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPostConstructBean</span> &#123;</span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;PostConstruct: Bean initialized!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// construct 构建</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>4. 使用InitializingBean接口</strong></p>
<p>提供了方法，用于在Spring容器初始化bean的属性后执行，执行特定的初始化逻辑。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInitializingBean</span> <span class="keyword">implements</span> <span class="title class_">InitializingBean</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;InitializingBean: Properties set!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>5. 使用Spring 事件监听器</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEventListener</span> &#123;</span><br><span class="line">    <span class="meta">@EventListener</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onApplicationEvent</span><span class="params">(ContextRefreshedEvent event)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;EventListener: Context refreshed!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p><strong>6. 自定义BeanFactoryPostProcessor 和 BeanPostProcessor</strong></p>
<p>他们都是Spring容器给的扩展点，可以在Spring容器初始化bean之前或之后执行特定的逻辑。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">         <span class="comment">// bean 初始化前</span></span><br><span class="line">        <span class="keyword">if</span> (bean <span class="keyword">instanceof</span> MySpecificBean) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;BeanPostProcessor: Before initialization of &quot;</span> + mianshiya.com);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">       <span class="comment">// bean 初始化后</span></span><br><span class="line">        <span class="keyword">if</span> (bean <span class="keyword">instanceof</span> MySpecificBean) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;BeanPostProcessor: After initialization of &quot;</span> + mianshiya.com);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/springboot/" rel="tag"># springboot</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/02/23/springMVC/" rel="prev" title="springMVC">
                  <i class="fa fa-angle-left"></i> springMVC
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/02/27/mybatis/" rel="next" title="mybatis">
                  mybatis <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">ZhangYuHao</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
