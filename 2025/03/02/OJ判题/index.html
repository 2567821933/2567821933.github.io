<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="OJ判题系统项目介绍OJ &#x3D; Online Judge 在线判题评测系统 用户可以选择题目，在线做题，编写代码并提交代码；系统会对用户提交的代码，根据我们出题人设置答案。 来判断用户的提交结果是否正确 最大难点： 判题逻辑 介绍： 用于在线评测编程题目代码的系统，能够根据用户提交的代码、出题人预先设置的题目输入和输出用例。进行编译代码，运行代码，判断代码运行结果是否正确。 判断题系统作为">
<meta property="og:type" content="article">
<meta property="og:title" content="OJ判题">
<meta property="og:url" content="http://example.com/2025/03/02/OJ%E5%88%A4%E9%A2%98/index.html">
<meta property="og:site_name" content="Zhang&#39;Blog">
<meta property="og:description" content="OJ判题系统项目介绍OJ &#x3D; Online Judge 在线判题评测系统 用户可以选择题目，在线做题，编写代码并提交代码；系统会对用户提交的代码，根据我们出题人设置答案。 来判断用户的提交结果是否正确 最大难点： 判题逻辑 介绍： 用于在线评测编程题目代码的系统，能够根据用户提交的代码、出题人预先设置的题目输入和输出用例。进行编译代码，运行代码，判断代码运行结果是否正确。 判断题系统作为">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67d544af88c538a9b5bec3b8.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67d546a388c538a9b5bec434.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67d546e188c538a9b5bec440.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67d54a7888c538a9b5bec4ff.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67e9f53d0ba3d5a1d7e716ee.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67ea0d2b0ba3d5a1d7e74c2f.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67ea0d640ba3d5a1d7e74d3d.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67ea12550ba3d5a1d7e76316.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67ea12870ba3d5a1d7e763c6.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67ea17ef0ba3d5a1d7e76c9a.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/6811b87a58cb8da5c8d5359f.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/6811bce358cb8da5c8d537ca.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/68146e9158cb8da5c8d68a1f.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/6815df6258cb8da5c8d96ff4.png">
<meta property="og:image" content="https://sca.aliyun.com/img/overview-doc-img/spring-cloud-alibaba-img.png">
<meta property="og:image" content="https://pic1.imgdb.cn/item/68186f5858cb8da5c8dd4aaa.png">
<meta property="article:published_time" content="2025-03-02T07:16:19.000Z">
<meta property="article:modified_time" content="2025-05-18T13:13:08.797Z">
<meta property="article:author" content="ZhangYuHao">
<meta property="article:tag" content="项目">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic1.imgdb.cn/item/67d544af88c538a9b5bec3b8.png">


<link rel="canonical" href="http://example.com/2025/03/02/OJ%E5%88%A4%E9%A2%98/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2025/03/02/OJ%E5%88%A4%E9%A2%98/","path":"2025/03/02/OJ判题/","title":"OJ判题"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>OJ判题 | Zhang'Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Zhang'Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#OJ%E5%88%A4%E9%A2%98%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.</span> <span class="nav-text">OJ判题系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.1.</span> <span class="nav-text">项目介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#OJ%E5%B8%B8%E7%94%A8%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.1.</span> <span class="nav-text">OJ常用概念</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%81%9A%E9%A1%B9%E7%9B%AE%E6%B5%81%E7%A8%8B"><span class="nav-number">1.2.</span> <span class="nav-text">做项目流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%B0%E6%9C%89%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%A0%94"><span class="nav-number">1.3.</span> <span class="nav-text">现有系统调研</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD"><span class="nav-number">1.3.1.</span> <span class="nav-text">功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%89%A9%E5%B1%95%E6%80%9D%E8%B7%AF"><span class="nav-number">1.3.2.</span> <span class="nav-text">项目扩展思路</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%A0%B8%E5%BF%83"><span class="nav-number">1.4.</span> <span class="nav-text">实现核心</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B"><span class="nav-number">1.5.</span> <span class="nav-text">核心业务流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD-1"><span class="nav-number">1.5.1.</span> <span class="nav-text">功能</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="nav-number">1.6.</span> <span class="nav-text">技术选型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.7.</span> <span class="nav-text">架构设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OJ%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88"><span class="nav-number">1.8.</span> <span class="nav-text">OJ系统实现方案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF"><span class="nav-number">1.9.</span> <span class="nav-text">前端</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E7%BB%93%E6%9E%84%E5%8C%96"><span class="nav-number">1.9.1.</span> <span class="nav-text">前端结构化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">1.9.2.</span> <span class="nav-text">初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="nav-number">1.9.3.</span> <span class="nav-text">前端工程化配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5%E7%9B%B8%E5%85%B3%E7%BB%84%E4%BB%B6"><span class="nav-number">1.9.4.</span> <span class="nav-text">引入相关组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E9%80%9A%E7%94%A8%E5%B8%83%E5%B1%80"><span class="nav-number">1.9.5.</span> <span class="nav-text">项目通用布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B6%E9%83%A8%E8%8F%9C%E5%8D%95%E7%9A%84%E5%8A%A8%E6%80%81%E5%8C%96%E5%A4%84%E7%90%86"><span class="nav-number">1.9.6.</span> <span class="nav-text">顶部菜单的动态化处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="nav-number">1.9.7.</span> <span class="nav-text">全局状态管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8EVuex"><span class="nav-number">1.9.7.1.</span> <span class="nav-text">关于Vuex</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="nav-number">1.9.8.</span> <span class="nav-text">权限管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E5%AF%BC%E8%88%AA%E6%A0%8F%E7%BB%84%E4%BB%B6-%E6%A0%B9%E6%8D%AE%E9%85%8D%E7%BD%AE%E6%8E%A7%E5%88%B6%E8%8F%9C%E5%8D%95%E7%9A%84%E6%98%BE%E7%A4%BA"><span class="nav-number">1.9.9.</span> <span class="nav-text">通用导航栏组件-根据配置控制菜单的显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%83%E9%99%90"><span class="nav-number">1.9.10.</span> <span class="nav-text">权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E9%A1%B9%E7%9B%AE%E5%85%A5%E5%8F%A3"><span class="nav-number">1.9.11.</span> <span class="nav-text">全局项目入口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%90%8E%E7%AB%AF%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="nav-number">1.9.12.</span> <span class="nav-text">自动生成后端的请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD-2"><span class="nav-number">1.9.13.</span> <span class="nav-text">功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95"><span class="nav-number">1.9.13.1.</span> <span class="nav-text">自动登录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E5%85%B7%E4%BD%93%E6%A8%A1%E5%9D%97"><span class="nav-number">1.10.</span> <span class="nav-text">前端具体模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD"><span class="nav-number">1.10.1.</span> <span class="nav-text">登录注册功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E4%B8%AA%E5%89%8D%E7%AB%AF%E7%9A%84%E9%A2%98%E7%9B%AE%E6%A8%A1%E5%9D%97%E2%80%94"><span class="nav-number">1.10.2.</span> <span class="nav-text">整个前端的题目模块—-</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E6%8E%A5%E5%85%A5"><span class="nav-number">1.10.2.1.</span> <span class="nav-text">组件接入</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Markdown-%E7%BC%96%E8%BE%91%E5%99%A8"><span class="nav-number">1.10.2.1.1.</span> <span class="nav-text">Markdown 编辑器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E7%BC%96%E8%BE%91%E5%99%A8"><span class="nav-number">1.10.2.1.2.</span> <span class="nav-text">代码编辑器</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91"><span class="nav-number">1.10.2.2.</span> <span class="nav-text">题目页面开发</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E9%A1%B5%E9%9D%A2"><span class="nav-number">1.10.3.</span> <span class="nav-text">个人中心页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B5%E9%9D%A2"><span class="nav-number">1.10.4.</span> <span class="nav-text">数据分析页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%92%E8%A1%8C%E6%A6%9C"><span class="nav-number">1.10.5.</span> <span class="nav-text">排行榜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2%EF%BC%88%E4%BB%85%E7%AE%A1%E7%90%86%E5%91%98%E5%8F%AF%E8%A7%81%EF%BC%89"><span class="nav-number">1.10.6.</span> <span class="nav-text">数据管理页面（仅管理员可见）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF"><span class="nav-number">1.11.</span> <span class="nav-text">后端</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%93%E8%A1%A8%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.11.1.</span> <span class="nav-text">库表设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="nav-number">1.11.2.</span> <span class="nav-text">后端接口开发</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B"><span class="nav-number">1.11.2.1.</span> <span class="nav-text">流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E7%9B%B8%E5%85%B3%E5%BC%80%E5%8F%91"><span class="nav-number">1.11.2.2.</span> <span class="nav-text">接口相关开发</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E5%88%A4%E9%A2%98%E6%9C%BA%E6%A8%A1%E5%9D%97%E9%A2%84%E5%BC%80%E5%8F%91"><span class="nav-number">1.11.3.</span> <span class="nav-text">后端判题机模块预开发</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A4%E9%A2%98%E5%92%8C%E6%B2%99%E7%AE%B1"><span class="nav-number">1.11.3.1.</span> <span class="nav-text">判题和沙箱</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%B2%99%E7%AE%B1%E6%A8%A1%E5%9D%97"><span class="nav-number">1.11.3.2.</span> <span class="nav-text">代码沙箱模块</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81%E6%B2%99%E7%AE%B1"><span class="nav-number">1.11.3.2.1.</span> <span class="nav-text">工厂模式优化代码沙箱</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.11.3.2.2.</span> <span class="nav-text">代理模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.11.3.2.3.</span> <span class="nav-text">策略模式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81%E9%80%BB%E8%BE%91"><span class="nav-number">1.11.4.</span> <span class="nav-text">提交代码逻辑</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Java%E6%B2%99%E7%AE%B1"><span class="nav-number">1.11.4.1.</span> <span class="nav-text">Java沙箱</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Docker-%E4%BB%A3%E7%A0%81%E6%B2%99%E7%AE%B1"><span class="nav-number">1.11.4.2.</span> <span class="nav-text">Docker 代码沙箱</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Docker"><span class="nav-number">1.11.4.3.</span> <span class="nav-text">Docker</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85docker"><span class="nav-number">1.11.4.3.1.</span> <span class="nav-text">安装docker</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Docker%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="nav-number">1.11.4.3.2.</span> <span class="nav-text">Docker命令行</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java%E6%93%8D%E4%BD%9Cdocker"><span class="nav-number">1.11.4.4.</span> <span class="nav-text">Java操作docker</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Docker-%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E6%B2%99%E7%AE%B1"><span class="nav-number">1.11.4.4.1.</span> <span class="nav-text">Docker 实现代码沙箱</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Docker%E5%AE%B9%E5%99%A8%E5%AE%89%E5%85%A8%E6%80%A7"><span class="nav-number">1.11.4.4.2.</span> <span class="nav-text">Docker容器安全性</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%94%B9%E9%80%A0"><span class="nav-number">1.12.</span> <span class="nav-text">微服务改造</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SpringCloudAlibaba"><span class="nav-number">1.12.0.0.1.</span> <span class="nav-text">SpringCloudAlibaba</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF%EF%BC%9F"><span class="nav-number">1.12.0.0.2.</span> <span class="nav-text">微服务实现技术？</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%B9%E9%80%A0%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.12.0.1.</span> <span class="nav-text">改造微服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%88%92%E5%88%86"><span class="nav-number">1.12.0.2.</span> <span class="nav-text">微服务划分</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%86%85%E9%83%A8%E8%B0%83%E7%94%A8"><span class="nav-number">1.12.0.3.</span> <span class="nav-text">服务内部调用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E8%A7%A3%E8%80%A6"><span class="nav-number">1.12.0.4.</span> <span class="nav-text">消息队列解耦</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">1.13.</span> <span class="nav-text">遇到的问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E5%90%91%E5%90%8E%E7%AB%AF%E4%BC%A0id%E5%AF%BC%E8%87%B4%E7%9A%84%E7%B2%BE%E5%BA%A6%E9%97%AE%E9%A2%98"><span class="nav-number">1.13.1.</span> <span class="nav-text">前端向后端传id导致的精度问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Java-%E5%90%8E%E7%AB%AF-Long-%E7%B1%BB%E5%9E%8B%E8%A2%AB%E6%88%AA%E6%96%AD"><span class="nav-number">1.13.1.1.</span> <span class="nav-text">1. Java 后端 Long 类型被截断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F"><span class="nav-number">1.13.1.2.</span> <span class="nav-text">解决方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%A1%AE%E4%BF%9D-Controller-%E6%8E%A5%E6%94%B6-String-%E6%88%96-Long"><span class="nav-number">1.13.1.3.</span> <span class="nav-text">(1) 确保 Controller 接收 String 或 Long</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SessionID%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98"><span class="nav-number">1.13.2.</span> <span class="nav-text">SessionID不一致问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A4%E9%A2%98%E9%80%BB%E8%BE%91"><span class="nav-number">1.14.</span> <span class="nav-text">判题逻辑</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A4%E9%A2%98%E9%80%BB%E8%BE%91%E8%AF%A6%E8%A7%A3"><span class="nav-number">1.14.1.</span> <span class="nav-text">判题逻辑详解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%B2%99%E7%AE%B1%E8%AF%A6%E8%A7%A3"><span class="nav-number">1.14.2.</span> <span class="nav-text">代码沙箱详解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91"><span class="nav-number">1.14.2.1.</span> <span class="nav-text">核心逻辑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8EProcess%E7%B1%BB"><span class="nav-number">1.14.2.2.</span> <span class="nav-text">关于Process类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E6%96%B9%E6%B3%95"><span class="nav-number">1.15.</span> <span class="nav-text">主要方法</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhangYuHao"
      src="/images/111.png">
  <p class="site-author-name" itemprop="name">ZhangYuHao</p>
  <div class="site-description" itemprop="description">一个小人物的个人博客</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">45</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/2567821933" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;2567821933" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:103903Zyh@gmail.com" title="E-Mail → mailto:103903Zyh@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/03/02/OJ%E5%88%A4%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/111.png">
      <meta itemprop="name" content="ZhangYuHao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang'Blog">
      <meta itemprop="description" content="一个小人物的个人博客">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="OJ判题 | Zhang'Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          OJ判题
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-03-02 15:16:19" itemprop="dateCreated datePublished" datetime="2025-03-02T15:16:19+08:00">2025-03-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-05-18 21:13:08" itemprop="dateModified" datetime="2025-05-18T21:13:08+08:00">2025-05-18</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="OJ判题系统"><a href="#OJ判题系统" class="headerlink" title="OJ判题系统"></a>OJ判题系统</h1><h2 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h2><p>OJ &#x3D; Online Judge 在线判题评测系统</p>
<p>用户可以选择题目，在线做题，编写代码并提交代码；系统会对用户提交的代码，根据我们出题人设置答案。</p>
<p>来判断用户的提交结果是否正确</p>
<p>最大难点： <strong>判题逻辑</strong></p>
<p>介绍： 用于在线评测编程题目代码的系统，能够根据用户提交的代码、出题人预先设置的题目输入和输出用例。进行编译代码，运行代码，判断代码运行结果是否正确。</p>
<p>判断题系统作为一个开发API提供给大家，便于大家开发自己的OJ系统。</p>
<h3 id="OJ常用概念"><a href="#OJ常用概念" class="headerlink" title="OJ常用概念"></a>OJ常用概念</h3><p>ac表示你的题目通过，结果正确</p>
<p>题目限制；</p>
<p>题目介绍</p>
<p>题目输入</p>
<p>题目输出</p>
<p>题目输入用例</p>
<p>题目输出用例</p>
<p>普通测评：管理员设置题目的输入和输出用例，交给判题机；给判题机去执行用户的代码，给用户的代码喂输入用例，看用户程序的执行结果是否和标准答案输出一致。</p>
<p>特殊测评（SPJ）： 管理员设置题目的输入和输出，比如我输入1，用户的答案只要是 &gt;0 或 &lt;2 都正确；特判程序，不是通过对比用例文件是否一致这种死板的程序来检验，而是要专门根据这道题来写一个特殊的判断程序。程序接收题目的输入，标准输出用例，用户结果，特判程序根据这些值来比较是否正确。</p>
<p>交互测评： 让用户输入一个例子，就给出一个输出结果，交互比较灵活，没办法通过简单的，死板的输入输出文件来搞定。 </p>
<p>不能让用户随便引入包，随便遍历，暴力破译，需要使用正确的算法 &#x3D;》 安全性</p>
<p>判题过程是异步的 &#x3D;》 异步化</p>
<p>提交之后会生成一个提交记录，有运行的结果以及运行信息（时间限制，内存限制）</p>
<h2 id="做项目流程"><a href="#做项目流程" class="headerlink" title="做项目流程"></a>做项目流程</h2><ol>
<li>项目介绍，项目调研，需求分析</li>
<li>核心业务流程</li>
<li>项目要做的功能（功能模块）</li>
<li>技术选型（技术预演）</li>
<li>项目初始化</li>
<li>项目开发</li>
<li>测试</li>
<li>优化</li>
<li>代码提交、代码审查</li>
<li>产品验收</li>
<li>上线</li>
</ol>
<p>写文档，持续调研，持续记录总结</p>
<h2 id="现有系统调研"><a href="#现有系统调研" class="headerlink" title="现有系统调研"></a>现有系统调研</h2><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><ol>
<li>题目浏览</li>
<li>在线做题，在线提交</li>
</ol>
<h3 id="项目扩展思路"><a href="#项目扩展思路" class="headerlink" title="项目扩展思路"></a>项目扩展思路</h3><ol>
<li>支持多种语言</li>
<li>远程评测</li>
<li>普通测评、特殊测评、交互测评、在线自测、子任务分组测评、文件IO</li>
<li>统计分析，用户判题记录</li>
<li>权限校验</li>
</ol>
<h2 id="实现核心"><a href="#实现核心" class="headerlink" title="实现核心"></a>实现核心</h2><ol>
<li><p>权限校验：谁能提代码，谁不能提代码</p>
</li>
<li><p>代码沙箱（安全沙箱）：用户代码藏毒，写个木马，修改系统权限</p>
<p>沙箱：用户的代码不能影响到沙箱之外的系统运行。</p>
<p>资源分配： 系统内存就2个G，用户疯狂占用资源占满内存。所以要限制占用资源。</p>
</li>
<li><p>判题规则：题目用例的比对，结果调用</p>
</li>
<li><p>任务调度：服务器资源有限，用户要排队，按照顺序去执行判题，而不是拒绝。</p>
</li>
</ol>
<h2 id="核心业务流程"><a href="#核心业务流程" class="headerlink" title="核心业务流程"></a>核心业务流程</h2><img src="https://pic1.imgdb.cn/item/67d544af88c538a9b5bec3b8.png" alt="image.png">

<p>时序图：</p>
<img src="https://pic1.imgdb.cn/item/67d546a388c538a9b5bec434.png" alt="image.png">

<img src="https://pic1.imgdb.cn/item/67d546e188c538a9b5bec440.png" alt="image.png">

<p>判题服务：获取题目信息，预计的输入输出结果，返回给主业务后端：用户的答案是否正确</p>
<p>代码沙箱：只负责运行代码，给出结果，不管什么结果是正确的</p>
<p><strong>实现了解耦</strong></p>
<h3 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h3><ol>
<li>题目模块<ul>
<li>创建题目（管理员）</li>
<li>删除题目（管理员）</li>
<li>修改题目（管理员）</li>
<li>搜索题目（用户）</li>
<li>在线做题</li>
<li>提价代码</li>
</ul>
</li>
<li>用户模块：<ul>
<li>注册</li>
<li>登录</li>
</ul>
</li>
<li>判题模块<ul>
<li>提交判断（结果是否正确或错误）</li>
<li>错误处理（内存溢出，安全性，超时）</li>
<li>自主实现（代码沙箱，安全沙箱）</li>
<li>开放接口（提供一个独立的新服务）</li>
</ul>
</li>
</ol>
<h2 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h2><p>前后：</p>
<p>Vue3、项目模版 Arco Design，在线代码编辑器，在线文档浏览</p>
<p>Java进程控制，Java安全管理器、部分JVM知识点</p>
<p>虚拟机（云服务）、Docker（代码沙箱实现）</p>
<p>Spring Cloud微服务（改造成微服务）、消息队列</p>
<h2 id="架构设计"><a href="#架构设计" class="headerlink" title="架构设计"></a>架构设计</h2><img src="https://pic1.imgdb.cn/item/67d54a7888c538a9b5bec4ff.png" alt="image.png">

<h2 id="OJ系统实现方案"><a href="#OJ系统实现方案" class="headerlink" title="OJ系统实现方案"></a>OJ系统实现方案</h2><p>开发原则： 能用别人现成的，就不要自己写</p>
<p>1）用现成的OJ系统，比如judge0（github）</p>
<p>2） 用现成的判题API，现成的代码沙箱。</p>
<p>3） 自主开发</p>
<p>4） 把AI来当做代码沙箱。</p>
<h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><h3 id="前端结构化"><a href="#前端结构化" class="headerlink" title="前端结构化"></a>前端结构化</h3><p>vue-router，路由，（通过<router-view/> 来显示）</p>
<p>layouts，不是组件，是布局，自己设置，通常用到子路由。</p>
<p>main.ts， 主文件，通常是用来组件引入，全局配置的。</p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>使用vue-cli，是一个脚手架。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g <span class="meta">@vue</span>/cli </span><br></pre></td></tr></table></figure>

<p>通过指令判断是否安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vue -version</span><br><span class="line">vue -V</span><br></pre></td></tr></table></figure>

<p>通过vue create 项目名创建项目</p>
<h3 id="前端工程化配置"><a href="#前端工程化配置" class="headerlink" title="前端工程化配置"></a>前端工程化配置</h3><p>通过选择包内的美化器，来完成代码工程的美化</p>
<img src="https://pic1.imgdb.cn/item/67e9f53d0ba3d5a1d7e716ee.png" alt="image.png">

<p>注意：在vue文件中执行格式化快捷键，不报错，表示配置工程化成功</p>
<p>脚手架自动整合了vue-router</p>
<h3 id="引入相关组件"><a href="#引入相关组件" class="headerlink" title="引入相关组件"></a>引入相关组件</h3><p>组件库：<a target="_blank" rel="noopener" href="https://arco.design/vue%EF%BC%88%E8%BF%99%E4%B8%AA%E7%9A%84%E8%AF%9D%E6%98%AF%E5%AD%97%E8%8A%82%E5%AF%B9%E6%A0%87%E9%98%BF%E9%87%8C%E7%9A%84ant">https://arco.design/vue（这个的话是字节对标阿里的ant</a> design pro的一个组件库）</p>
<p>进入后通过快速上手文档来学习</p>
<p>执行安装组件命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># npm</span><br><span class="line">npm install --save-dev @arco-design/web-vue</span><br><span class="line"># yarn</span><br><span class="line">yarn add --dev @arco-design/web-vue</span><br></pre></td></tr></table></figure>

<p>改变main.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ArcoVue</span> <span class="keyword">from</span> <span class="string">&#x27;@arco-design/web-vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@arco-design/web-vue/dist/arco.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(store).<span class="title function_">use</span>(router).<span class="title function_">use</span>(<span class="title class_">ArcoVue</span>).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="项目通用布局"><a href="#项目通用布局" class="headerlink" title="项目通用布局"></a>项目通用布局</h3><p>新建一个布局，在app.tx中引入</p>
<p>选用 arco design的layout组件，先把上中下组件布局编排好，然后在填充内容。</p>
<p>实现通用菜单。</p>
<p>将菜单上的路由读取路由文件。</p>
<p>1） 提取通用路由文件</p>
<img src="https://pic1.imgdb.cn/item/67ea0d2b0ba3d5a1d7e74c2f.png" alt="image.png">

<p>将index中的路由信息提取到routes.ts中</p>
<img src="https://pic1.imgdb.cn/item/67ea0d640ba3d5a1d7e74d3d.png" alt="image.png">

<h3 id="顶部菜单的动态化处理"><a href="#顶部菜单的动态化处理" class="headerlink" title="顶部菜单的动态化处理"></a>顶部菜单的动态化处理</h3><p>目标：</p>
<p>1） 提取通用路由文件</p>
<p>2）菜单组件读取路由，动态渲染菜单项</p>
<p>3）绑定跳转事件</p>
<p>4）同步路由菜单项</p>
<p>一下是具体操作：</p>
<p>引入组件的菜单后，发现菜单的头信息是写死的，引入路由文件，将路由的名字替换为菜单显示信息</p>
<img src="https://pic1.imgdb.cn/item/67ea12550ba3d5a1d7e76316.png" alt="image.png">

<p>这里的话需要引入刚刚抽象出来的路由信息</p>
<img src="https://pic1.imgdb.cn/item/67ea12870ba3d5a1d7e763c6.png" alt="image.png">

<p>下面的方法是跳转事件，通过点击来完成页面路由的跳转。</p>
<p>通过路由后改变选中的高亮值，来选择路由，一下是具体实现</p>
<img src="https://pic1.imgdb.cn/item/67ea17ef0ba3d5a1d7e76c9a.png" alt="image.png">

<h3 id="全局状态管理"><a href="#全局状态管理" class="headerlink" title="全局状态管理"></a>全局状态管理</h3><p>vuex库：<a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/guide/">https://vuex.vuejs.org/zh/guide/</a></p>
<p>所有页面全局共享的变量，而不是局限在一个页面中。</p>
<p>适合作为全局状态的数据：<strong>用户信息</strong></p>
<p>本质上： 给你提供了一套增删改查全局变量的API，可能多了一些功能（比如时间旅行）</p>
<h4 id="关于Vuex"><a href="#关于Vuex" class="headerlink" title="关于Vuex"></a>关于Vuex</h4><p>state： 存储的状态信息，比如用户信息 </p>
<p> mutation： 定义了对变量进行增删改查（更新）的方法</p>
<p>actions： 执行异步操作，并且触发mutation的更改，（action调用了mutation）</p>
<h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><p>直接以一套通用的机制，去定义那个页面需要哪些权限（可以通过路由来判断是否有权限）</p>
<p>思路：</p>
<ol>
<li>在路由配置文件，定义某个路由的访问权限</li>
<li>在全局页面组件中绑定一个全局路由监听，每次访问页面时，先判断用户是否有对应的权限。</li>
<li>如果有则跳转，没有则401</li>
</ol>
<h3 id="通用导航栏组件-根据配置控制菜单的显示"><a href="#通用导航栏组件-根据配置控制菜单的显示" class="headerlink" title="通用导航栏组件-根据配置控制菜单的显示"></a>通用导航栏组件-根据配置控制菜单的显示</h3><p>1） routes.ts 给路由新增一个标志位，用于判断路由是否显隐</p>
<p>2） 不要用v-for + v-if去条件渲染元素，这样会先循环所有的元素，导致性能问题，可以先过滤（在代码区过滤），在循环显示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/过滤路由</span><br><span class="line">const visibleRoutes = routes.filter((item, index) =&gt; &#123;</span><br><span class="line">  if (item.meta?.hideInMenu) &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">  return true;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loginUser 登录的用户信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> needAccess 需要的权限</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> boolean 是否权限通过</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AccessEnum</span> <span class="keyword">from</span> <span class="string">&quot;@/access/accessEnum&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkAccess</span> = (<span class="params"><span class="attr">loginUser</span>: <span class="built_in">any</span>, <span class="attr">needAccess</span>: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 获取当前登录用户具有的权限</span></span><br><span class="line">  <span class="keyword">const</span> loginUserAccess = loginUser?.<span class="property">userRole</span> ?? <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>;</span><br><span class="line">  <span class="comment">// 需要的权限是未登录，则直接放行</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 需要用户登录才能访问</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">USER</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果用户没有登录则表示无权限</span></span><br><span class="line">    <span class="keyword">if</span> (loginUserAccess === <span class="title class_">AccessEnum</span>.<span class="property">NOT_LOGIN</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 需要管理员才放行</span></span><br><span class="line">  <span class="keyword">if</span> (needAccess === <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果不为管理员</span></span><br><span class="line">    <span class="keyword">if</span> (loginUserAccess !== <span class="title class_">AccessEnum</span>.<span class="property">ADMIN</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> checkAccess;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这是权限判定类。</p>
<p>关于GlobalHeader 动态菜单组件，根据权限过滤菜单</p>
<p>注意： 这里使用计算属性，是为了当前登录用户信息发生变更时，触发菜单栏的重新渲染，展示新增权限菜单项</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//过滤路由</span></span><br><span class="line"><span class="keyword">const</span> visibleRoutes = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// computed方法，根据属性动态的改变变量</span></span><br><span class="line">  <span class="keyword">return</span> routes.<span class="title function_">filter</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 隐藏菜单过滤</span></span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">meta</span>?.<span class="property">hideInMenu</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//todo 根据权限过滤隐藏菜单</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">checkAccess</span>(loginUser, item.<span class="property">meta</span>?.<span class="property">access</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="全局项目入口"><a href="#全局项目入口" class="headerlink" title="全局项目入口"></a>全局项目入口</h3><p>预留的初始化项目。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局初始化函数，有全局单次调用的代码，都可以写到这里</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doInit</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello,欢迎来到我的项目&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 初始化时调用</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">doInit</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h3 id="自动生成后端的请求"><a href="#自动生成后端的请求" class="headerlink" title="自动生成后端的请求"></a>自动生成后端的请求</h3><p>前端发送请求，后端接受。（axios）</p>
<p>编写调用后端代码</p>
<p>自动编写的：<a target="_blank" rel="noopener" href="https://github.com/ferdikoomen/openapi-typescript-codegen">https://github.com/ferdikoomen/openapi-typescript-codegen</a></p>
<p>相关指令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openapi --input http://localhost:7529/api//v3/api-docs --output ./generated --client axios</span><br></pre></td></tr></table></figure>



<h3 id="功能-2"><a href="#功能-2" class="headerlink" title="功能"></a>功能</h3><h4 id="自动登录"><a href="#自动登录" class="headerlink" title="自动登录"></a>自动登录</h4><p>1） 编程远程登录代码</p>
<p>2） 在哪里去触发getloginUser？应当在一个全局的位置</p>
<p>有很多选择：路由拦截；全局页面进入；全局通用布局；</p>
<p>注意： 代码生成后，OpenAPI文件的WITH_CREDENTIALS会自动重置为false，应该为true。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">OpenAPI</span>: <span class="title class_">OpenAPIConfig</span> = &#123;</span><br><span class="line">  <span class="attr">BASE</span>: <span class="string">&quot;http://localhost:7529&quot;</span>,</span><br><span class="line">  <span class="attr">VERSION</span>: <span class="string">&quot;1.0&quot;</span>,</span><br><span class="line">  <span class="attr">WITH_CREDENTIALS</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">CREDENTIALS</span>: <span class="string">&quot;include&quot;</span>,</span><br><span class="line">  <span class="attr">TOKEN</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">USERNAME</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">PASSWORD</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">HEADERS</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">ENCODE_PATH</span>: <span class="literal">undefined</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>







<h2 id="前端具体模块"><a href="#前端具体模块" class="headerlink" title="前端具体模块"></a>前端具体模块</h2><h3 id="登录注册功能"><a href="#登录注册功能" class="headerlink" title="登录注册功能"></a>登录注册功能</h3><p>登录界面</p>
<p>注册界面</p>
<h3 id="整个前端的题目模块—"><a href="#整个前端的题目模块—" class="headerlink" title="整个前端的题目模块—-"></a>整个前端的题目模块—-</h3><blockquote>
<p>之前写的太乱了，从这里开始条理一些</p>
</blockquote>
<p>前端技术选型： Vue3，Arco Design组件库，项目模版，在线代码编辑器，在线文档浏览</p>
<p>做题模块的主要页面：</p>
<ul>
<li>题目管理页（管理员）<ul>
<li>查看（搜索）</li>
<li>删除</li>
<li>修改</li>
<li>快捷创建</li>
</ul>
</li>
<li>题目列表页（用户）</li>
<li>题目详情页面（在线做题页面）<ul>
<li>判题状态的查看</li>
</ul>
</li>
<li>题目提交列表页</li>
<li>扩展：提交统计页面，用户个人页</li>
</ul>
<h4 id="组件接入"><a href="#组件接入" class="headerlink" title="组件接入"></a>组件接入</h4><p>为判题系统整合组件</p>
<h5 id="Markdown-编辑器"><a href="#Markdown-编辑器" class="headerlink" title="Markdown 编辑器"></a>Markdown 编辑器</h5><p>为什么用Markdown？</p>
<p>一套通用的文本编辑语法，可以在各大网站上统一标准、渲染出统一的样式比较简单易学。</p>
<p>开源组件推荐： <a target="_blank" rel="noopener" href="https://github.com/pd4d10/bytemd">https://github.com/pd4d10/bytemd</a></p>
<p><strong>操作</strong></p>
<p><strong>1. 现在对应组件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @bytemd/vue-next # 安装对应的组件</span><br></pre></td></tr></table></figure>

<p><strong>2. 引入对应css组件</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;bytemd/dist/index.css&#x27;</span> <span class="comment">// 在全局文件中引入样式</span></span><br></pre></td></tr></table></figure>

<p><strong>3. 在Vue中组件使用的方法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Editor :value=&quot;value&quot; :plugins=&quot;plugins&quot; @change=&quot;handleChange&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import gfm from &#x27;@bytemd/plugin-gfm&#x27;</span><br><span class="line">import &#123; Editor, Viewer &#125; from &#x27;@bytemd/vue&#x27;</span><br><span class="line"></span><br><span class="line">const plugins = [</span><br><span class="line">  gfm(),</span><br><span class="line">  // Add more plugins here</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123; Editor &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123; value: &#x27;&#x27;, plugins &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange(v) &#123;</span><br><span class="line">      this.value = v</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>4. 引入Markdown对应的功能组件</strong></p>
<p>一个是gfm，一个是高亮</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="variable">@bytemd</span><span class="operator">/</span>plugin<span class="operator">-</span>gfm <span class="variable">@bytemd</span><span class="operator">/</span>plugin<span class="operator">-</span>highlight</span><br></pre></td></tr></table></figure>

<p><strong>5. 定义组件的属性，让外部的类来指定组件的值</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 表示需要父组件写入信息</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Props</span> &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">handleChange</span>: <span class="function">(<span class="params"><span class="attr">v</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> plugins = [</span><br><span class="line">  <span class="title function_">gfm</span>(),</span><br><span class="line">  <span class="title function_">hil</span>(),</span><br><span class="line">  <span class="comment">// Add more plugins here</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里是定义了一个默认的值，防止，没有值导致的报错。</span></span><br><span class="line"><span class="comment">// eslint-disable-next-line no-undef</span></span><br><span class="line"><span class="keyword">const</span> props = <span class="title function_">withDefaults</span>(defineProps&lt;<span class="title class_">Props</span>&gt;(), &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="function">() =&gt;</span> <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">handleChange</span>: <span class="function">(<span class="params"><span class="attr">v</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(v);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h5 id="代码编辑器"><a href="#代码编辑器" class="headerlink" title="代码编辑器"></a>代码编辑器</h5><p>这里的话是使用到了一个微软的代码编辑框架（monaco-editor）</p>
<p>框架地址： <a target="_blank" rel="noopener" href="https://github.com/microsoft/monaco-editor">https://github.com/microsoft/monaco-editor</a></p>
<p><strong>操作</strong></p>
<p><strong>1. 下载对应组件</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install monaco<span class="operator">-</span>editor</span><br></pre></td></tr></table></figure>

<p><strong>2. 关于webpack的插件</strong></p>
<p>因为这个编辑器用到了webpack，所以需要一些插件</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install monaco<span class="operator">-</span>editor<span class="operator">-</span>webpack<span class="operator">-</span>plugin</span><br></pre></td></tr></table></figure>

<p>插件作用：把代码编辑器和webpack打包在一起，便于打包。</p>
<p><strong>3. vue-cli项目（webpack）整合monaco-editor</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&quot;@vue/cli-service&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MonacoWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;monaco-editor-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="title function_">chainWebpack</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    config.<span class="title function_">plugin</span>(<span class="string">&quot;monaco&quot;</span>).<span class="title function_">use</span>(<span class="keyword">new</span> <span class="title class_">MonacoWebpackPlugin</span>(&#123;&#125;));</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>4. 示例地址</strong></p>
<p>code-Editor的项目页面</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;code-editro&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;codeEditorRef&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> monaco <span class="keyword">from</span> <span class="string">&quot;monaco-editor&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> codeEditorRef = <span class="title function_">ref</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> codeEditor = <span class="title function_">ref</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> value = <span class="title function_">ref</span>(<span class="string">&quot;hello world!!!&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (!codeEditorRef.<span class="property">value</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  codeEditor.<span class="property">value</span> = monaco.<span class="property">editor</span>.<span class="title function_">create</span>(codeEditorRef.<span class="property">value</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">value</span>: value.<span class="property">value</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">language</span>: <span class="string">&quot;java&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">automaticLayout</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">minimap</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">enabled</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">readOnly</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">theme</span>: <span class="string">&quot;vs-dark&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>在这里启动后出现了报错的情况，根据deepseek：这个错误是因为你的 Babel 配置不支持静态类块（static class blocks），而 Monaco Editor 使用了这个较新的 JavaScript 特性。</p>
<p>解决：</p>
<p>下载插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @babel/plugin-transform-class-static-block</span><br></pre></td></tr></table></figure>

<p>配置 <code>babel.config.js</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&quot;@vue/cli-plugin-babel/preset&quot;</span>],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="string">&quot;@babel/plugin-transform-class-static-block&quot;</span>,</span><br><span class="line">    <span class="comment">// 其他插件...</span></span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p><strong>5. 这里是CodeEditor页</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;code-editro&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;codeEditorRef&quot;</span> <span class="attr">style</span>=<span class="string">&quot;min-height: 400px&quot;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> monaco <span class="keyword">from</span> <span class="string">&quot;monaco-editor&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted, ref, toRaw &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> codeEditorRef = <span class="title function_">ref</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> codeEditor = <span class="title function_">ref</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> value = <span class="title function_">ref</span>(<span class="string">&quot;hello world!!!&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">interface <span class="title class_">Props</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">value</span>: string;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">handleChange</span>: <span class="function">(<span class="params">v: string</span>) =&gt;</span> <span class="keyword">void</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// eslint-disable-next-line no-undef</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> props = <span class="title function_">withDefaults</span>(defineProps&lt;<span class="title class_">Props</span>&gt;(), &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">value</span>: <span class="function">() =&gt;</span> <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">handleChange</span>: <span class="function">(<span class="params">v: string</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(v);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (!codeEditorRef.<span class="property">value</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  codeEditor.<span class="property">value</span> = monaco.<span class="property">editor</span>.<span class="title function_">create</span>(codeEditorRef.<span class="property">value</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">value</span>: props.<span class="property">value</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">language</span>: <span class="string">&quot;java&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">automaticLayout</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">minimap</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">enabled</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">readOnly</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">theme</span>: <span class="string">&quot;vs-dark&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 编辑监听器变化</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  codeEditor.<span class="property">value</span>.<span class="title function_">onDidChangeModelContent</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    props.<span class="title function_">handleChange</span>(<span class="title function_">toRaw</span>(codeEditor.<span class="property">value</span>).<span class="title function_">getValue</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<p>注意：monaco editor在使用时，在读写值时，要使用 toRaw（编辑器实例）的语法来执行操作，否则会卡死。</p>
<h4 id="题目页面开发"><a href="#题目页面开发" class="headerlink" title="题目页面开发"></a>题目页面开发</h4><h3 id="个人中心页面"><a href="#个人中心页面" class="headerlink" title="个人中心页面"></a>个人中心页面</h3><p>头像</p>
<p>个人信息</p>
<p>记录展示：</p>
<ul>
<li>答题记录（包括已完成和未完成）</li>
<li>已完成（通过）</li>
<li>未完成（未通过）</li>
<li>没做过（未提交过）</li>
</ul>
<h3 id="数据分析页面"><a href="#数据分析页面" class="headerlink" title="数据分析页面"></a>数据分析页面</h3><p>图表：</p>
<ul>
<li>已完成，未完成，没做过（饼状图）</li>
<li>7日内答题信息（折线图）</li>
</ul>
<h3 id="排行榜"><a href="#排行榜" class="headerlink" title="排行榜"></a>排行榜</h3><p>对题目进行分数统计，通过分数来进行排行。</p>
<p>点击排行榜信息，能到达对应的用户个人页面</p>
<p>排行榜有定位，定位自己的信息。</p>
<h3 id="数据管理页面（仅管理员可见）"><a href="#数据管理页面（仅管理员可见）" class="headerlink" title="数据管理页面（仅管理员可见）"></a>数据管理页面（仅管理员可见）</h3><p>用户管理</p>
<p>题目管理</p>
<h2 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h2><h3 id="库表设计"><a href="#库表设计" class="headerlink" title="库表设计"></a>库表设计</h3><p>题目库表：</p>
<p>题目标题</p>
<p>题目内容：存放题目的介绍，输入输出提示</p>
<p>题目标签：JSON数组字符串</p>
<p>题目答案</p>
<p>提交数：通过题目的数量，用于分析数据（自动给题目打标签）</p>
<p>判题通过率</p>
<p>类型</p>
<p>下面四个保存在JSON对象中，（好处，便于扩展，只需要更改对象内部的数据）</p>
<p>json（judgeConfig）判题配置</p>
<p>输入用例 </p>
<p>输出用例</p>
<p>json（judgeCase）判题相关用例</p>
<p>时间限制</p>
<p>内存限制</p>
<p>（大文件都存在数据库的情况下，会导致数据库的读取变慢，可以尝试存储文件的url地址。）</p>
<blockquote>
<p>注意：使用JSON前提</p>
<ol>
<li>你不需要根据某个字段去倒查这条数据。</li>
<li>你的字段含义相关，属于同一类的值。</li>
<li>你的字段存储空间占用不能太大。</li>
</ol>
</blockquote>
<p>题目提交表</p>
<p>提交id</p>
<p>提交用户id userid</p>
<p>提交题目id questionid</p>
<p>语言： language</p>
<p>用户的代码： code</p>
<p>判题状态：status（待判题，判题中，成功，失败）</p>
<p>判题信息： （判题过程中得到的一些信息，比如程序的失败原因，程序执行消耗的时间，空间）</p>
<p>judegInfo（json 对象）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;message&quot;: “程序执行信息”，</span><br><span class="line">	“time”： 1000，</span><br><span class="line">	“memory”： 1000，</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>失败原因信息枚举：</p>
<ul>
<li>Accepted成功</li>
<li>Wrong Answer 答案错误</li>
<li>compile Error 编译错误</li>
<li>Memory Limit Exceeded 内存溢出</li>
<li>Time Limit Exceeded 时间超时</li>
<li>Presentation Error 展示错误</li>
<li>Output Limit Exceeded 输出溢出</li>
<li>Waiting 等待中</li>
<li>Dangerous Operation 运行错误</li>
<li>System Error 系统错误（做系统人的问题）</li>
</ul>
<h3 id="后端接口开发"><a href="#后端接口开发" class="headerlink" title="后端接口开发"></a>后端接口开发</h3><h4 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h4><p>1）根据功能设计库表</p>
<p>2）自动生成对数据库的增删改查（mapper和service层的基本功能）</p>
<p>3）编写controller层，实现基本的增删改查和权限校验（复制粘贴）</p>
<p>4）去根据业务定制开发新的功能&#x2F;编写新的代码</p>
<p>关于mybatisplus，是快速的生成查询语句</p>
<h4 id="接口相关开发"><a href="#接口相关开发" class="headerlink" title="接口相关开发"></a>接口相关开发</h4><p>关于dto中的updateRequest和editRequest的区别： 前者是给管理员用的更新用的，可指定更多字段，后者是给普通用户用的，用来修改一些信息。保证用户不会修改仅管理员可用的属性。</p>
<p>对于接口中的json值，</p>
<p>可以将请求里面的JSON属性，变成对应的对象，完成对前端请求的接受。 </p>
<p>什么时候加业务前缀？</p>
<p>加业务前缀的好处，防止多个表中都有类似的类，产生冲突；不加的前提，因为可能这个类是多个业务之间共享的，能够复用的。</p>
<p>定义VO类：专门用来返回对象信息，用于过滤后，返回安全的一个对象。</p>
<blockquote>
<p>关于id递增的情况可能用到的问题，可能会造成爬虫安全性。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(value =&quot;question&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Question</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 这里有一个 IdType.AUTO ，可以尝试改成 IdType.ASSIGN_ID,这样就是一个分布式的获取id，保障了一个在爬虫行为下的安全性</span></span><br></pre></td></tr></table></figure>



<h3 id="后端判题机模块预开发"><a href="#后端判题机模块预开发" class="headerlink" title="后端判题机模块预开发"></a>后端判题机模块预开发</h3><h4 id="判题和沙箱"><a href="#判题和沙箱" class="headerlink" title="判题和沙箱"></a>判题和沙箱</h4><p>判题模块： 调用代码沙箱，把代码和输入交给代码沙箱去执行</p>
<p>代码沙箱：只负责接受代码的输入，返回运行结果，不负责判题（可以作为一个独立的项目和服务，提供给其他执行代码去使用功能）</p>
<p>这两个模块完全解耦</p>
<p>结构图：</p>
<img src="https://pic1.imgdb.cn/item/6811b87a58cb8da5c8d5359f.png" alt="{74428417-2A69-4963-A5ED-0C1F40ACD437}.png">

<p><strong>为什么代码沙箱要接受和输出一组运行用例</strong></p>
<p>前提：每道题有多组测试用例</p>
<p>如果每个用例单独调用一次代码沙箱，会调用多次接口，需要多次网络传输，程序要多次编译，记录程序的执行状态（重复的代码不重复编译）</p>
<h4 id="代码沙箱模块"><a href="#代码沙箱模块" class="headerlink" title="代码沙箱模块"></a>代码沙箱模块</h4><blockquote>
<p>注意：这里用到了@build，使用后可以使用构造器来自动构建对象的值</p>
</blockquote>
<img src="https://pic1.imgdb.cn/item/6811bce358cb8da5c8d537ca.png" alt="image.png">

<p>定义代码沙箱接口，提高通用性</p>
<p>之后项目代码只调用</p>
<p><strong>1. 示例代码沙箱</strong></p>
<p><strong>2. 远程沙箱</strong></p>
<p><strong>3. 第三方代码沙箱</strong></p>
<h5 id="工厂模式优化代码沙箱"><a href="#工厂模式优化代码沙箱" class="headerlink" title="工厂模式优化代码沙箱"></a>工厂模式优化代码沙箱</h5><p>此处使用静态工厂模式，实现较为简单</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yupi.project.judge.codesandbox;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yupi.project.judge.codesandbox.impl.ExampleCodeSandbox;</span><br><span class="line"><span class="keyword">import</span> com.yupi.project.judge.codesandbox.impl.RemoteCodeSandbox;</span><br><span class="line"><span class="keyword">import</span> com.yupi.project.judge.codesandbox.impl.ThirdPartyCodeSandbox;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 沙箱代码工厂（根据字符串参数创建指定代码沙箱实例）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeSandboxFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CodeSandbox <span class="title function_">newInstance</span> <span class="params">(String type)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;example&quot;</span>: <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ExampleCodeSandbox</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;remote&quot;</span>: <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RemoteCodeSandbox</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;thirParty&quot;</span>: <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ThirdPartyCodeSandbox</span>();</span><br><span class="line">            <span class="keyword">default</span>: <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ExampleCodeSandbox</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>扩展思路，如果确定代码沙箱不会出现线程安全问题可复用，那么可以使用单例工厂模式</p>
</blockquote>
<p>参数配置化，把项目中的一些可选项，交给用户去完成，这样只需要通过改配置文件而不需要修改配置代码就可以完成修改。</p>
<h5 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h5><p>使用代理模式，在原有的代码条件下，做封装，通过代理类来完成调用</p>
<h5 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h5><p>针对不同的情况定义独立的策略，而不是把所有的判题逻辑混到一起去写</p>
<h3 id="提交代码逻辑"><a href="#提交代码逻辑" class="headerlink" title="提交代码逻辑"></a>提交代码逻辑</h3><ol>
<li>Java原生沙箱</li>
<li>docker 沙箱</li>
</ol>
<p>注意： 代码沙箱是只用来判题的，并不对题目进行直接判断正负</p>
<h4 id="Java沙箱"><a href="#Java沙箱" class="headerlink" title="Java沙箱"></a>Java沙箱</h4><h4 id="Docker-代码沙箱"><a href="#Docker-代码沙箱" class="headerlink" title="Docker 代码沙箱"></a>Docker 代码沙箱</h4><h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4><p><strong>docker的概念</strong></p>
<p>为什么要用呢？容器技术？</p>
<p>为了提升系统的安全性，把程序和宿主机进行隔离，使得某个程序或者应该不会影响到系统的本身。</p>
<p>docker技术可以实现程序和宿主机的隔离。</p>
<p>什么是容器？</p>
<p>理解为对一系列应用程序、服务和环境的封装，从而不程序运行在一个隔离的、密闭的、私密的空间内，对外整体提供服务。</p>
<p>可以把一个容器理解成一个新的电脑（定制化的操作系统）</p>
<p>基本概念：</p>
<p>什么是容器？</p>
<p>镜像： 用来创建容器的安装包，可以理解为给电脑安装操作系统的系统镜像</p>
<p>容器： 通过镜像来创建的一套运行环境，一个容器可以运行多个程序，可以理解为电脑实例</p>
<p>Dockerfile： 制作镜像的文件，可以理解为制作文件的清单。</p>
<p><strong>Docker核心特性</strong></p>
<img src="https://pic1.imgdb.cn/item/68146e9158cb8da5c8d68a1f.png" alt="image.png">

<p>1）Docker运行在Linux内核上</p>
<p>2）CGroups：实现了容器的资源隔离，底层是linux Cgroup命令，能够控制进程使用的资源</p>
<p>3）Network网络： 实现容器的网络隔离，docker容器内部的网络互不影响</p>
<p>4）Namespaces命名空间： 可以把进程隔离在不同的命名空间下，每个容器他都可以有自己的命名空间，不同的命名空间下的进程互不影响。</p>
<p>5）Storage存储空间：容器内的文件是相互隔离的，也可以使用宿主机的文件。</p>
<p>镜像仓库： 存放镜像的仓库，用户可以从仓库中获取镜像</p>
<p>推荐使用docker官方的镜像仓库： <a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<h5 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h5><p>一般情况下，不建议在Windows系统上安装</p>
<p>Windows本身就自带一个虚拟机较WSL。</p>
<p>我安装的是 20.10.21</p>
<h5 id="Docker命令行"><a href="#Docker命令行" class="headerlink" title="Docker命令行"></a>Docker命令行</h5><p>1） 查看命令用法</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<p>查看具体子命令用法</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<p>2） 从远程仓库中拉取镜像</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hello-world</span><br></pre></td></tr></table></figure>

<p>3） 通过镜像创建容器实例：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name my-hello-world swr.cn-east-3.myhuaweicloud.com/library/hello-world:latest</span><br></pre></td></tr></table></figure>

<p>4） 查看容器状态</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<p>5） 启动实例</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器名或<span class="built_in">id</span></span><br></pre></td></tr></table></figure>

<p>6） 查看日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker logs 容器名</span><br></pre></td></tr></table></figure>

<p>7） 删除容器</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> 容器名</span><br></pre></td></tr></table></figure>

<p>8） 删除镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi 镜像名 -f</span><br></pre></td></tr></table></figure>



<p>9） 推送镜像 docker push</p>
<h4 id="Java操作docker"><a href="#Java操作docker" class="headerlink" title="Java操作docker"></a>Java操作docker</h4><p>这里用到一个库，dockerJava</p>
<p>github： <a target="_blank" rel="noopener" href="https://github.com/docker-java/docker-java">https://github.com/docker-java/docker-java</a></p>
<p>DockerClientConfig: 用于定义初始化Docker的配置，（类比mysql的连接，线程数配置）</p>
<p>DockerHttpClient：用于向Docker守护进程（操作docker的接口）发送请求的客户端，低层，需要自己构造请求参数</p>
<p>DockerClient： 才是真正和Docker守护进程交互，最方便的SDK，高层封装，对DockerHttpClient再进行了一层封装（理解成MyBatis），提供了现成的增删改查，</p>
<h5 id="Docker-实现代码沙箱"><a href="#Docker-实现代码沙箱" class="headerlink" title="Docker 实现代码沙箱"></a>Docker 实现代码沙箱</h5><p>实现流程： docker负责运行java程序，并且得到结果。</p>
<ol>
<li>把用户的代码保存为文件</li>
<li>编译代码，得到class文件</li>
<li>把编译好的文件上传到容器环境内</li>
<li>在容器中执行代码，得到输出结果</li>
<li>收集整理输出结果。</li>
<li>文件清理，释放空间。</li>
<li>错误处理，提升程序健壮性。</li>
</ol>
<p>扩展点</p>
<blockquote>
<p>模板方法设计模式，定义同一套实现流程，让不同的子类去负责不同流程中，的具体实现。执行步骤一样，每个步骤的实现方式不一样。</p>
</blockquote>
<p><strong>3. 创建容器，上传编译文件</strong></p>
<p>定义容器的两种方式：</p>
<p>1） 在已有镜像的基础上空充：比如拉取现成的Java环境（包含JDK）， 再把编译后的文件复制到容器里。适合新项目，跑通项目流程。</p>
<p>思考： 是每一个测试用例都单独创建一个容器，每个容器只执行一次java命令？</p>
<p>浪费性能，所以需要创建一个可交互的容器，完成多次的输入人输出。</p>
<p><strong>4. 启动容器</strong><br>Docker 执行容器命令（操作已启动容器）</p>
<h5 id="Docker容器安全性"><a href="#Docker容器安全性" class="headerlink" title="Docker容器安全性"></a>Docker容器安全性</h5><p>超时控制，可以增加超时参数控制值：</p>
<p>但是，这种方式无论超时与否，都会执行，无法判断</p>
<p>网络资源</p>
<p>权限控制</p>
<p>Docker容器已经做了系统层面的隔离，比较安全，但不能保证绝对安全</p>
<img src="https://pic1.imgdb.cn/item/6815df6258cb8da5c8d96ff4.png" alt="image.png">



<p>模版方法： </p>
<p>优化代码沙箱调用方法。</p>
<h2 id="微服务改造"><a href="#微服务改造" class="headerlink" title="微服务改造"></a>微服务改造</h2><p>服务：提供某种类功能的代码</p>
<p>微服务：专注于提供某类特定功能的代码，不是把所有的代码放到一个项目里面。会把整个大的项目按照一定的功能、逻辑进行拆分，拆分成多个子模块，每个子模块互不影响，可以独立运行。</p>
<p>实现因素：服务管理，服务调用，服务开发</p>
<h5 id="SpringCloudAlibaba"><a href="#SpringCloudAlibaba" class="headerlink" title="SpringCloudAlibaba"></a>SpringCloudAlibaba</h5><img src="https://sca.aliyun.com/img/overview-doc-img/spring-cloud-alibaba-img.png" />

<p>spring Cloud Alibaba 是对springCloud的标准实现和增强</p>
<h5 id="微服务实现技术？"><a href="#微服务实现技术？" class="headerlink" title="微服务实现技术？"></a>微服务实现技术？</h5><p>Spring Cloud</p>
<p><strong>Spring Cloud Alibaba（采用）</strong></p>
<p>Dubbo（DubboX）</p>
<p>RPC（GRPC、TRPC）</p>
<p>本质上是通过HTTP、或这其他网络协议来进行通讯来实现。</p>
<img src="https://pic1.imgdb.cn/item/68186f5858cb8da5c8dd4aaa.png" alt="image.png">

<p>推荐学习项目： Discovery（是对微服务的进一步增强，去github里面找）</p>
<blockquote>
<p>感兴趣可以尝试</p>
</blockquote>
<h4 id="改造微服务"><a href="#改造微服务" class="headerlink" title="改造微服务"></a>改造微服务</h4><p>用户登录功能： 需要改成分布式登录</p>
<p>其他内容： 有没有用到单机锁（该着成分布式锁）</p>
<p>有没有用到本地缓存：改造成分布式缓存（Redis）</p>
<p>有没有用到事务：比如操作多个表</p>
<p>改造分布式登录</p>
<h4 id="微服务划分"><a href="#微服务划分" class="headerlink" title="微服务划分"></a>微服务划分</h4><p>从业务出发，对服务进行拆分。</p>
<p>依赖服务：</p>
<ul>
<li>注册中心： Nacos</li>
<li>微服务网关： Gateway 聚合所有的接口，统一处理前端的请求</li>
</ul>
<p>公共服务：</p>
<ul>
<li>common公共模块：全局异常处理器、请求响应封装类</li>
<li>model模型模块：很多服务公用的实体类</li>
<li>公用接口模块</li>
</ul>
<p>业务模块：</p>
<ul>
<li>用户模块8102</li>
<li>题目模块8103</li>
<li>判题模块8104</li>
</ul>
<p>路由划分：</p>
<p>用springBoot的contex-path统一修改各项目的接口前缀，比如：</p>
<p>用户服务：</p>
<ul>
<li>&#x2F;api&#x2F;user</li>
<li>&#x2F;api&#x2F;user&#x2F;inner(内部调用，网关层面要做限制)</li>
</ul>
<p>题目服务：</p>
<ul>
<li>&#x2F;api&#x2F;question(也包括题目提交信息)</li>
<li>&#x2F;api&#x2F;question&#x2F;inner (内部调用，网关层调用要做限制)</li>
</ul>
<p>判题模块：</p>
<ul>
<li>&#x2F;api&#x2F;judge</li>
<li>&#x2F;api&#x2F;judeg&#x2F;inner （内部调用，网关层要做限制）</li>
</ul>
<h4 id="服务内部调用"><a href="#服务内部调用" class="headerlink" title="服务内部调用"></a>服务内部调用</h4><p>OpenFeign： Http调用客户端，提供了更方便的方式来让你远程调用其他服务。</p>
<p>Nacos： 注册中心获取服务调用地址。</p>
<p>实现client接口</p>
<p>开启openfeign的支持，把我们的几口暴露出去（服务注册中心上），作为API给其他服务调用，其他服务从注册中心寻找。</p>
<p>需要修改每个服务提供者的context-path请求全局路径</p>
<p>服务提供者：理解提供接口的 </p>
<p>关于OpenFeign的使用</p>
<ol>
<li><p>在common模块中定义API</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common/src/main/java/com/your/company/common/api/CommonFeignClient.java</span></span><br><span class="line"><span class="meta">@FeignClient(name = &quot;common-service&quot;, path = &quot;/api/common&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CommonFeignClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/utils/format&quot;)</span></span><br><span class="line">    String <span class="title function_">formatText</span><span class="params">(<span class="meta">@RequestParam(&quot;text&quot;)</span> String text)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/data/validate&quot;)</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">validateData</span><span class="params">(<span class="meta">@RequestBody</span> ValidationRequest request)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="消息队列解耦"><a href="#消息队列解耦" class="headerlink" title="消息队列解耦"></a>消息队列解耦</h4><p>此处选用纤细队列改造项目，解耦判题服务和题目服务，题目服务只需要向消息队列发消息。</p>
<p>RabbitMQ</p>
<p>1） 引入RabbitMQ</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><h3 id="前端向后端传id导致的精度问题"><a href="#前端向后端传id导致的精度问题" class="headerlink" title="前端向后端传id导致的精度问题"></a>前端向后端传id导致的精度问题</h3><h4 id="1-Java-后端-Long-类型被截断"><a href="#1-Java-后端-Long-类型被截断" class="headerlink" title="1. Java 后端 Long 类型被截断"></a>1. <strong>Java 后端 <code>Long</code> 类型被截断</strong></h4><ul>
<li><p><strong>前端传递的 <code>id</code> 是 <code>number</code> 类型</strong>：<br>JavaScript 的 <code>number</code> 类型最大安全整数是 <code>2^53 - 1</code>（即 <code>9007199254740991</code>），而 <code>1915699042188218370</code> 超过了这个范围，导致精度丢失。</p>
<p>javascript</p>
<p>复制</p>
<p>下载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(1915699042188218370 === 1915699042188218368); // true（精度丢失）</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>后端收到的 <code>id</code> 值已经改变</strong>：<br>如果前端传参时 <code>id</code> 被转换成 <code>number</code>，大 <code>Long</code> 可能会被截断，导致数据库查询不到。</p>
</li>
</ul>
<h4 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h4><p> <strong>2. 后端：检查 <code>Long</code> 类型的处理</strong></p>
<h4 id="1-确保-Controller-接收-String-或-Long"><a href="#1-确保-Controller-接收-String-或-Long" class="headerlink" title="(1) 确保 Controller 接收 String 或 Long"></a><strong>(1) 确保 Controller 接收 <code>String</code> 或 <code>Long</code></strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping(&quot;/getById&quot;)</span><br><span class="line">public Result&lt;Question&gt; getById(@RequestParam String id) &#123; // 使用 String 接收</span><br><span class="line">    Long questionId = Long.parseLong(id); // 手动转 Long</span><br><span class="line">    Question question = questionService.getById(questionId);</span><br><span class="line">    return ResultUtils.success(question);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public Result&lt;Question&gt; getById(@RequestParam Long id) &#123; // Spring 会自动转换</span><br><span class="line">    Question question = questionService.getById(id);</span><br><span class="line">    return ResultUtils.success(question);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="SessionID不一致问题"><a href="#SessionID不一致问题" class="headerlink" title="SessionID不一致问题"></a>SessionID不一致问题</h3><p> <strong>核心原因</strong></p>
<ol>
<li><strong>Cookie 未正确传递</strong>：<ul>
<li>后端返回的 <code>JSESSIONID</code> Cookie 没有被浏览器保存</li>
<li>后续请求没有携带这个 Cookie</li>
</ul>
</li>
<li><strong>跨域请求限制</strong>：<ul>
<li>前端与后端域名&#x2F;端口不同时，默认不携带 Cookie</li>
<li>缺少必要的 CORS 配置</li>
</ul>
</li>
<li><strong>安全策略限制</strong>：<ul>
<li>Cookie 的 <code>SameSite</code>、<code>Secure</code> 等属性配置不当</li>
<li>浏览器隐私设置阻止了 Cookie</li>
</ul>
</li>
</ol>
<h2 id="判题逻辑"><a href="#判题逻辑" class="headerlink" title="判题逻辑"></a>判题逻辑</h2><h3 id="判题逻辑详解"><a href="#判题逻辑详解" class="headerlink" title="判题逻辑详解"></a>判题逻辑详解</h3><p>进入Controller后，根据传入的数据，进行提交QuestionSubtmit，并将判题状态指定为0待判题</p>
<p>通过RabbitMQ，进入异步的JudgeService，（doJudge）</p>
<p>进入后显示进行判断，防止判空，将QuestionSubmit,状态转化1判题中，</p>
<p>通过调用沙箱，来获取executeCodeRequest（调用了沙箱）</p>
<p>通过JudgeManager。dojudge，来解析返回的数据</p>
<h3 id="代码沙箱详解"><a href="#代码沙箱详解" class="headerlink" title="代码沙箱详解"></a>代码沙箱详解</h3><p>（java判题原理）</p>
<h4 id="核心逻辑"><a href="#核心逻辑" class="headerlink" title="核心逻辑"></a>核心逻辑</h4><p>核心思路：用程序代替人工，用程序操作命令行，去编译执行代码。</p>
<p>Java的进程管理类：Process</p>
<ol>
<li>把用户代码保存为文件</li>
<li>编译代码，得到class文件</li>
<li>执行代码，获取输出结果。(这里设置了一个超时控制，会中断代码)</li>
<li>收集整理输出结果</li>
<li>文件清理</li>
<li>处理错误，提升程序健壮性。</li>
</ol>
<p>Runtime.getRuntime().exec()； 可以通过这个指令来执行命令。在命令行中任何的指令都可以使用这个命令。并返回Process</p>
<h4 id="关于Process类"><a href="#关于Process类" class="headerlink" title="关于Process类"></a>关于Process类</h4><p><code>Process</code>类位于<code>java.lang</code>包中，它提供了以下核心功能：</p>
<ul>
<li>启动外部进程</li>
<li>获取进程的输入&#x2F;输出&#x2F;错误流</li>
<li>获取进程的退出状态</li>
<li>等待进程完成</li>
<li>销毁(终止)进程</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1：使用Runtime.exec()</span></span><br><span class="line"><span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> Runtime.getRuntime().exec(<span class="string">&quot;notepad.exe&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2：使用ProcessBuilder（推荐）</span></span><br><span class="line"><span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessBuilder</span>(<span class="string">&quot;notepad.exe&quot;</span>).start();</span><br></pre></td></tr></table></figure>

<h2 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h2><ol>
<li><strong>输入&#x2F;输出流控制</strong><ul>
<li><code>getOutputStream()</code>: 获取进程的输入流（向进程写入数据）</li>
<li><code>getInputStream()</code>: 获取进程的输出流（读取进程的输出）</li>
<li><code>getErrorStream()</code>: 获取进程的错误流</li>
</ul>
</li>
<li><strong>进程控制</strong><ul>
<li><code>waitFor()</code>: 使当前线程等待，直到进程终止</li>
<li><code>destroy()</code>: 强制终止进程</li>
<li><code>destroyForcibly()</code>: Java 8新增，更强制地终止进程</li>
<li><code>isAlive()</code>: Java 8新增，检查进程是否存活</li>
</ul>
</li>
<li><strong>状态信息</strong><ul>
<li><code>exitValue()</code>: 获取进程的退出值（如果进程尚未终止会抛出异常）</li>
<li><code>pid()</code>: Java 9新增，获取进程ID</li>
</ul>
</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag"># 项目</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/02/27/mybatis/" rel="prev" title="mybatis">
                  <i class="fa fa-angle-left"></i> mybatis
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/03/19/%E8%A6%81%E5%81%9A%E7%9A%84%E4%BA%8B/" rel="next" title="要做的事">
                  要做的事 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">ZhangYuHao</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
