<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="一个小人物的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Zhang&#39;Blog">
<meta property="og:url" content="http://example.com/page/5/index.html">
<meta property="og:site_name" content="Zhang&#39;Blog">
<meta property="og:description" content="一个小人物的个人博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ZhangYuHao">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/5/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Zhang'Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zhang'Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhangYuHao"
      src="/images/111.png">
  <p class="site-author-name" itemprop="name">ZhangYuHao</p>
  <div class="site-description" itemprop="description">一个小人物的个人博客</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">45</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/2567821933" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;2567821933" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:103903Zyh@gmail.com" title="E-Mail → mailto:103903Zyh@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/01/01/API%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/111.png">
      <meta itemprop="name" content="ZhangYuHao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang'Blog">
      <meta itemprop="description" content="一个小人物的个人博客">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang'Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/01/01/API%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE/" class="post-title-link" itemprop="url">API开放平台项目</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-01-01 21:44:49" itemprop="dateCreated datePublished" datetime="2025-01-01T21:44:49+08:00">2025-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-17 14:17:28" itemprop="dateModified" datetime="2025-02-17T14:17:28+08:00">2025-02-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index"><span itemprop="name">项目</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="API开放平台"><a href="#API开放平台" class="headerlink" title="API开放平台"></a>API开放平台</h1><h2 id="第一期"><a href="#第一期" class="headerlink" title="第一期"></a>第一期</h2><h3 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h3><p>背景：</p>
<ol>
<li>当前端需要后端的接口时</li>
<li>使用现成的系统功能（<a target="_blank" rel="noopener" href="http://api.btstu.cn/">http://api.btstu.cn/</a>)</li>
</ol>
<p>考虑内容：</p>
<ol>
<li>防止攻击（安全）</li>
<li>不能随便调用（限制，开通）</li>
<li>计费</li>
<li>流量保护</li>
<li>API接入</li>
<li>统计调用次数</li>
</ol>
<p>介绍：做一个提供API接口调用的平台，用户可以注册登录，开通接口调用权限。用户可以使用接口，每次调用可以统计。管理员可以发布接口，下线接口，接入接口，以及可视化接口调用情况数据。</p>
<h3 id="业务流程"><a href="#业务流程" class="headerlink" title="业务流程"></a>业务流程</h3><p><img src="https://pic1.imgdb.cn/item/67750dfcd0e0a243d4ed5be3.png"></p>
<p>整体架构形式，注意接口文档要写好。</p>
<p>考虑计费功能架构</p>
<p><img src="https://pic1.imgdb.cn/item/67750fd8d0e0a243d4ed5cff.png"></p>
<p>这里下面的保护的模块需要API网关。</p>
<blockquote>
<p>API网关：（kong, nginx, gateway)</p>
</blockquote>
<p><img src="https://pic1.imgdb.cn/item/677510f2d0e0a243d4ed5d29.png"></p>
<blockquote>
<p><strong>SDK</strong>: <strong>（Software Development Kit）</strong> <strong>即软件开发工具包，是一组软件工具、库文件、文档和示例代码的集合，用于帮助开发者为特定的软件包、软件框架、硬件平台、操作系统或计算机系统创建应用软件</strong>‌。‌</p>
</blockquote>
<p>技术选型</p>
<p>前端：</p>
<p>Ant Design Pro</p>
<p>React </p>
<p>Ant Design Procomponents</p>
<p>Umi</p>
<p>Umi Request（Axios 的封装）</p>
<p>后端：</p>
<p>Java SpringBoot </p>
<p>Spring Boot Starter （ SDK 开发）</p>
<p>？？？ （网关，限流，日志实现）</p>
<h3 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h3><ol>
<li>管理员可以对接口信息进行增删改查</li>
<li>用户可以访问前台，查看接口信息</li>
</ol>
<p>本次任务：</p>
<ol>
<li>项目初始化前端后端</li>
<li>管理员可以对接口信息进行增删改查</li>
<li>用户可以访问前台，查看接口信息。</li>
</ol>
<p>第一期– 展示</p>
<p>项目介绍，技术选型，设计</p>
<p>基础项目的搭建</p>
<p>接口管理</p>
<p>用户查看接口</p>
<p>第二期– 接口调用</p>
<p>接口调用</p>
<p>接口文档展示，接口在线调用</p>
<p>保证调用的安全（API签名认证）</p>
<p>第三期 – 接口计费与调用</p>
<p>统计用户调用次数</p>
<p>限流统计日志开通</p>
<p>第四期 – 管理统计</p>
<p>提供可视化平台，用图标的方式展示所有接口的调用情况，便于调整业务。</p>
<p>其他，预警功能</p>
<h3 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h3><p>接口信息</p>
<p>id </p>
<p>name 接口名称</p>
<p>description 描述</p>
<p>url 接口地址</p>
<p>requestHeader 请求头 text</p>
<p>responseHeader 响应头 text</p>
<p>status 接口状态 0-默认 1-开启</p>
<p>isDelete</p>
<p>createTime</p>
<p>updateTime</p>
<p>method 请求类型 varchar(256)</p>
<p>userid 创建人 bigint</p>
<p>创建数据库，sqlfather.yupi.icu</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- interface_info</span></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> my_api.`interface_info`</span><br><span class="line">(</span><br><span class="line">`id` <span class="type">bigint</span> <span class="keyword">not null</span> auto_increment comment <span class="string">&#x27;主键&#x27;</span> <span class="keyword">primary key</span>,</span><br><span class="line">`name` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">not null</span> comment <span class="string">&#x27;名称&#x27;</span>,</span><br><span class="line">`description` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">null</span> comment <span class="string">&#x27;描述&#x27;</span>,</span><br><span class="line">`url` <span class="type">varchar</span>(<span class="number">512</span>) <span class="keyword">not null</span> comment <span class="string">&#x27;接口地址&#x27;</span>,</span><br><span class="line">`requestHeader` text <span class="keyword">null</span> comment <span class="string">&#x27;请求头&#x27;</span>,</span><br><span class="line">`responseHeader` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">null</span> comment <span class="string">&#x27;响应头&#x27;</span>,</span><br><span class="line">`status` <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not null</span> comment <span class="string">&#x27;0关闭1开启&#x27;</span>,</span><br><span class="line">`<span class="keyword">method</span>` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">not null</span> comment <span class="string">&#x27;请求类型&#x27;</span>,</span><br><span class="line">`userId` <span class="type">bigint</span> <span class="keyword">not null</span> comment <span class="string">&#x27;创建人&#x27;</span>,</span><br><span class="line">`createTime` datetime <span class="keyword">default</span> <span class="string">&#x27;CURRENT_TIMESTAMP&#x27;</span> <span class="keyword">not null</span> comment <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">`updateTime` datetime <span class="keyword">default</span> <span class="string">&#x27;CURRENT_TIMESTAMP&#x27;</span> <span class="keyword">not null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">`isDeleted` tinyint <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not null</span> comment <span class="string">&#x27;是否删除(0-未删, 1-已删)&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;interface_info&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 设置字符集</span><br><span class="line"><span class="keyword">ALTER TABLE</span> `interface_info` <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="keyword">CHARACTER SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="基础功能"><a href="#基础功能" class="headerlink" title="基础功能"></a>基础功能</h3><p>增删改查，登录（复制粘贴）</p>
<p>前端接口调用：openapi 插件自动生成</p>
<p>openapi的规范 </p>
<h2 id="第二期"><a href="#第二期" class="headerlink" title="第二期"></a>第二期</h2><p>选择需要的接口开通，并调用。</p>
<ol>
<li>继续开发接口管理前端页面</li>
<li>开发模拟api接口</li>
<li>开发调用这个接口的代码</li>
<li>保证调用的安全性（API签名认证）</li>
<li>客户端的SDK的开发</li>
<li>发布与调用接口（管理员）</li>
<li>接口文档展示，接口在线调用。</li>
</ol>
<p>提供三个模拟接口</p>
<ol>
<li>GET接口</li>
<li>POST接口（url传参）</li>
<li>POST接口（Restful）</li>
</ol>
<p>开发调用接口</p>
<p>几种HTTP调用方式：</p>
<ol>
<li>HttpClient</li>
<li>RestTemplate</li>
<li>第三方库（OKHTTP，Hutool）</li>
</ol>
<p>这里用到了 hutool （<a target="_blank" rel="noopener" href="http://hutool.cn/">http://hutool.cn</a>)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用现成的工具类，调用接口。</p>
<h3 id="API签名认证"><a href="#API签名认证" class="headerlink" title="API签名认证"></a>API签名认证</h3><p>本质：</p>
<ol>
<li>签发签名</li>
<li>使用签名（校验签名）</li>
</ol>
<p>为什么需要？</p>
<ol>
<li>保证安全性，不能随便一个人调用。</li>
</ol>
<h4 id="怎么实现"><a href="#怎么实现" class="headerlink" title="怎么实现"></a>怎么实现</h4><p>通过 http request header 头传递参数。</p>
<p>参数1：accessKey： 调用的标识（尽量负责无序）</p>
<p>参数2：secreKey： 密钥 （该参数不传递）不能放到请求头中。</p>
<p>（可以理解为用户名和密码，区别是无状态的）</p>
<p>在用户中添加这两个属性</p>
<blockquote>
<p>可以自己写</p>
</blockquote>
<p>注意：在传递的时候，密码一定不能以明文的形式传递，有可能会被拦截。不安全</p>
<p>参数3： 用户请求参数</p>
<p>参数4： sign 签名，通过签名算法生成。</p>
<p>加密方式：对称加密，非堆成加密，md5签名（不可解密）</p>
<p>用户参数 + 密钥 -》 <strong>签名生成算法（MD5，HMac，Sha1）</strong> -》 不可解密的值。</p>
<p>abc+ abcdefgh &#x3D;》 不可解密数据</p>
<p>服务端怎么知道这个签名对不对？</p>
<p>服务端用一模一样的参数和算法去生成签名，只要和用户传的一致，就表示一致。</p>
<blockquote>
<p>重放： 指再次发送同样的请求</p>
</blockquote>
<p>怎么防止重放？</p>
<ol>
<li><p>加一个随机数 参数5：nonce，服务端要保存用过的随机数</p>
<p>加 参数6：timestamp 时间戳，校验时间戳是否过期。</p>
</li>
</ol>
<blockquote>
<p>主要目的：密码不要在服务器之间传输</p>
</blockquote>
<p>签名认证是一个很灵活的设计，具体要有哪些参数，尽量要服务端调用。根据场景来实现。</p>
<h3 id="SDK开发"><a href="#SDK开发" class="headerlink" title="SDK开发"></a>SDK开发</h3><blockquote>
<p>SDK ： 软件开发工具包</p>
</blockquote>
<p>思考： 难道开发者每次调用接口都需要自己写签名算法？</p>
<p>尝试开发一个简单的 SDK</p>
<p>开发starter的好处：</p>
<ol>
<li>开发者引入后，可以直接在application.yml 中写配置，自动创建客户端。</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这个依赖的作用是自动生成配置的代码提示。</p>
<p>配置 META-INF&#x2F;spring.factories</p>
<p>执行maven下的install</p>
<p>注意打包后的文件在本地的maven存储目录下</p>
<p>小作业： 怎么把打包好的包发到 maven 仓库中。</p>
<h2 id="第三期"><a href="#第三期" class="headerlink" title="第三期"></a>第三期</h2><p>第三期 – 接口计费与调用</p>
<p>统计用户调用次数</p>
<p>限流</p>
<p>计费</p>
<p>日志</p>
<p>开通</p>
<ol>
<li>开发接口发布&#x2F;下线功能（管理员）。</li>
<li>前端去浏览接口，查看接口文档，申请签名（注册）</li>
<li>在线调试（用户）。</li>
<li>统计用户调用接口的次数。</li>
<li>优化系统-api网关。</li>
</ol>
<h3 id="开发接口发布-下线功能（管理员）。"><a href="#开发接口发布-下线功能（管理员）。" class="headerlink" title="开发接口发布&#x2F;下线功能（管理员）。"></a>开发接口发布&#x2F;下线功能（管理员）。</h3><p>开发接口发布&#x2F;下线功能（管理员）。</p>
<p>后台接口</p>
<p>发布接口（仅管理员可操作）</p>
<ol>
<li>校验该接口是否存在</li>
<li>判断该接口是否可以调用。</li>
<li>修改接口数据库中的状态字段为1</li>
</ol>
<p>下线接口（仅管理员可操作）</p>
<ol>
<li>校验该接口是否存在</li>
<li>修改接口数据库中的状态字段为0</li>
</ol>
<h3 id="前端去浏览接口，查看接口文档，申请签名（注册）"><a href="#前端去浏览接口，查看接口文档，申请签名（注册）" class="headerlink" title="前端去浏览接口，查看接口文档，申请签名（注册）"></a>前端去浏览接口，查看接口文档，申请签名（注册）</h3><p>申请签名</p>
<p>用户在注册成功时分配accessKey 和 secretKey</p>
<h3 id="todo"><a href="#todo" class="headerlink" title="todo"></a>todo</h3><p>扩展点：用户可以自行修改签名</p>
<h3 id="todo-1"><a href="#todo-1" class="headerlink" title="todo"></a>todo</h3><p>先跑通整个流程，在修改前端。</p>
<h3 id="todo-2"><a href="#todo-2" class="headerlink" title="todo"></a>todo</h3><p>判断该接口是否可以调用时由固定方法改为根据测试地址来调用</p>
<h3 id="在线调用后台接口"><a href="#在线调用后台接口" class="headerlink" title="在线调用后台接口"></a>在线调用后台接口</h3><p><img src="https://pic1.imgdb.cn/item/6778e639d0e0a243d4eeed86.png"></p>
<p>接口平台后端可以保护模拟接口，也可以做一些业务逻辑。</p>
<p>流程：</p>
<ol>
<li>前端将用户输入的请求参数和要测试的接口id发给平台后端</li>
<li>（在调用前需要做一些校验）</li>
<li>平台后端去调用模拟接口。</li>
</ol>
<h3 id="todo-3"><a href="#todo-3" class="headerlink" title="todo"></a>todo</h3><p>判断该接口是否可以调用时由固定方法名改为根据测试地址来调用</p>
<p>用户测试接口固定方法名改为根据测试地址来调用</p>
<p>模拟接口改为从数据库校验akey</p>
<h2 id="第四期"><a href="#第四期" class="headerlink" title="第四期"></a>第四期</h2><ol>
<li>开发接口调用次数的统计</li>
<li>优化一下整个系统的架构（API网关）<ul>
<li>网关是什么？</li>
<li>网关的作用？</li>
<li>网关的应用场景及实现？</li>
<li>结合业务去应用网关</li>
</ul>
</li>
</ol>
<h3 id="接口调用次数统计"><a href="#接口调用次数统计" class="headerlink" title="接口调用次数统计"></a>接口调用次数统计</h3><p>需求：</p>
<ol>
<li><p>每次用户调用接口成功，次数+1。</p>
</li>
<li><p>给用户飞陪或用户自主申请接口调用次数</p>
</li>
</ol>
<p>业务流程：</p>
<ol>
<li>用户调用接口（之前已经完成）</li>
<li>修改数据库，调用次数+1</li>
</ol>
<p>设计库表：</p>
<p>那个用户？那个接口？</p>
<p>用户-》接口（多对多）</p>
<p>用户接口关系表：（用来保存调用接口的次数）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> my_api.`user_interface_info`</span><br><span class="line">(</span><br><span class="line">    `id` <span class="type">bigint</span> <span class="keyword">not null</span> auto_increment comment <span class="string">&#x27;主键&#x27;</span> <span class="keyword">primary key</span>,</span><br><span class="line">    `userId` <span class="type">bigint</span> <span class="keyword">not null</span> comment <span class="string">&#x27;调用用户id&#x27;</span>,</span><br><span class="line">    `interfaceInfoId` <span class="type">bigint</span> <span class="keyword">not null</span> comment <span class="string">&#x27;接口id&#x27;</span>,</span><br><span class="line">    `totalNum` <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not null</span> comment <span class="string">&#x27;总调用次数&#x27;</span>,</span><br><span class="line">    `leftNum` <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not null</span> comment <span class="string">&#x27;剩余调用次数&#x27;</span>,</span><br><span class="line">    `status` <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not null</span> comment <span class="string">&#x27;0关闭1开启&#x27;</span>,</span><br><span class="line">    `createTime` datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not null</span> comment <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `updateTime` datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `isDeleted` tinyint <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not null</span> comment <span class="string">&#x27;是否删除(0-未删, 1-已删)&#x27;</span> </span><br><span class="line">   </span><br><span class="line">) comment <span class="string">&#x27;user_interface_info&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>步骤：</p>
<ol>
<li>开发基本增删改查</li>
<li>开发用户调用接口次数+1的功能（service）</li>
</ol>
<p>问题；如果每个接口的方法都写调用功能次数+1，是不是比较麻烦？</p>
<p>解决思路：</p>
<p><img src="https://pic1.imgdb.cn/item/6779e5f2d0e0a243d4ef122c.png"></p>
<p>使用aop切面：独立于接口，在每个接口执行完成后次数+1</p>
<p>缺点：只存在于单个项目中，如果每个团队都要写一个切面就无法实现。</p>
<p>解决：</p>
<p>网关技术</p>
<p><img src="https://pic1.imgdb.cn/item/6779e811d0e0a243d4ef1264.png"></p>
<p>把接口接入网关，通过网关来找到接口。</p>
<h4 id="什么是网关"><a href="#什么是网关" class="headerlink" title="什么是网关"></a>什么是网关</h4><p>什么是网关？理解成火车站的检票口，统一去检票。</p>
<p>网关的有点：统一去进行一些操作，处理一些问题。</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><ol>
<li>路由</li>
<li>鉴权</li>
<li>跨域</li>
<li>缓存</li>
<li>流量染色</li>
<li>访问控制</li>
<li>统一业务处理</li>
<li>发布控制</li>
<li>脱敏</li>
<li>负载均衡</li>
<li>接口保护<ol>
<li>限制请求</li>
<li>信息脱敏</li>
<li>降级（熔断）</li>
<li>限流</li>
<li>超时时间</li>
</ol>
</li>
<li>统一日志</li>
<li>统一文档</li>
</ol>
<h5 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h5><p>起到转发的作用，比如有接口A和接口B，网关会记录这些信息，根据用户访问的地址和参数，转发到对应的接口（服务器、集群）</p>
<p>&#x2F;a &#x3D;&gt; 接口A</p>
<p>&#x2F;b &#x3D;&gt; 接口B</p>
<p>&#x2F;c &#x3D;&gt; 服务A&#x2F;集群A（随机转发到其中的某一个机器）</p>
<h4 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h4><p>在路由的基础上，转发到其他接口。</p>
<p>将url改成服务地址，lb：xxx</p>
<h4 id="统一鉴权"><a href="#统一鉴权" class="headerlink" title="统一鉴权"></a>统一鉴权</h4><p>判断用户是否有权限进行操作,需要自己写代码</p>
<h4 id="统一跨域"><a href="#统一跨域" class="headerlink" title="统一跨域"></a>统一跨域</h4><p>网关统一处理跨域</p>
<h4 id="统一的业务处理"><a href="#统一的业务处理" class="headerlink" title="统一的业务处理"></a>统一的业务处理</h4><p>把一些每个项目中都要做的通用逻辑放到上层（网关）</p>
<h4 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h4><p>黑白名单，比如限制DDOS Ip</p>
<h4 id="发布控制"><a href="#发布控制" class="headerlink" title="发布控制"></a>发布控制</h4><p>灰度发布，比如上线新接口，先给新接口分配20%流量，老接口80%流量</p>
<p><img src="https://pic1.imgdb.cn/item/677a2854d0e0a243d4ef1dca.png"></p>
<h4 id="流量染色"><a href="#流量染色" class="headerlink" title="流量染色"></a>流量染色</h4><p><img src="https://pic1.imgdb.cn/item/6779eb2ad0e0a243d4ef12b0.png"></p>
<p>给流量添加一些标识，一般是设置请求头中，添加新的请求头。</p>
<p>在进入网关的情况下通过流量染色添加信息，在接口处理时判断。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">after_route</span> <span class="comment"># 就是一个名称，只要不跟别的路由冲突就行</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://localhost:8123/api/name/try</span>  <span class="comment"># 重定向地址</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">AddRequestHeader=zhang,shuaiqi</span></span><br></pre></td></tr></table></figure>

<p>通过添加请求头对请求进行染色，防止直接访问后端接口。</p>
<p>可以了解一下链路追踪。</p>
<h4 id="接口保护"><a href="#接口保护" class="headerlink" title="接口保护"></a>接口保护</h4><ol>
<li>限制请求：</li>
<li>信息脱敏： 移除响应操作</li>
<li>降级（熔断）：接口下线后，反馈信息</li>
<li>限流（通常选择redis限流）令牌桶算法，最好系统的学习。<ol>
<li>学习令牌桶算法，学习漏桶算法，学习RedisLimitHandler(springcloud的一个限流器)</li>
</ol>
</li>
<li>超时时间：通过配置超时时间</li>
<li>重试（业务保护）</li>
</ol>
<h4 id="统一日志"><a href="#统一日志" class="headerlink" title="统一日志"></a>统一日志</h4><p>统一的请求响应信息记录。要自己写代码</p>
<h4 id="统一文档"><a href="#统一文档" class="headerlink" title="统一文档"></a>统一文档</h4><p>将下游项目的文档进行聚合，统一管理。</p>
<h4 id="网关的分类"><a href="#网关的分类" class="headerlink" title="网关的分类"></a>网关的分类</h4><ol>
<li>全局网关（接入层网关）：作用是负载均衡，请求日志，不和业务逻辑绑定。</li>
<li>业务网关（微服务网关）：会有一些业务逻辑，作用是将请求转发到不同的业务&#x2F;项目&#x2F;接口&#x2F;服务</li>
</ol>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><ol>
<li>Nginx（全局网关），Kong网关（API网关）</li>
<li>Spring Cloud Getway（取代了Zuul）性能高，可以用Java代码来写逻辑。</li>
</ol>
<p> 网关技术选型：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/500587132">https://zhuanlan.zhihu.com/p/500587132</a></p>
<h4 id="Spring-Cloud-Gateway-用法"><a href="#Spring-Cloud-Gateway-用法" class="headerlink" title="Spring Cloud Gateway 用法"></a>Spring Cloud Gateway 用法</h4><p>去看官方文档</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/index.html">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/index.html</a></p>
<h4 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h4><p>路由（根据什么条件，转发请求到哪里）</p>
<p>断言（一组规则，条件，用来确定如何转发路由）</p>
<p>官方文档：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-cloud-gateway/reference/">https://docs.spring.io/spring-cloud-gateway/reference/</a></p>
<p>请求流程：</p>
<ol>
<li>客户端发起请求</li>
<li>Handler Mapping: 根据断言，去将请求转发到对应的路由</li>
<li>Web Handler：处理请求（层层过滤）</li>
<li>实际调用服务。</li>
</ol>
<h4 id="两种配置方式"><a href="#两种配置方式" class="headerlink" title="两种配置方式"></a>两种配置方式</h4><p>编程式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.zhangapigateway;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.route.RouteLocator;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.route.builder.RouteLocatorBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZhangapiGatewayApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(ZhangapiGatewayApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RouteLocator <span class="title function_">customRouteLocator</span><span class="params">(RouteLocatorBuilder builder)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> builder.routes()</span><br><span class="line">                .route(<span class="string">&quot;tobaidu&quot;</span>, r -&gt; r.path(<span class="string">&quot;/baidu&quot;</span>)<span class="comment">//设置断言，访问/get前缀，会重定向到</span></span><br><span class="line">                        .uri(<span class="string">&quot;http://www.baidu.com&quot;</span>))</span><br><span class="line">                .route(<span class="string">&quot;toyupiicu&quot;</span>, r -&gt; r.host(<span class="string">&quot;/zhangicu&quot;</span>)</span><br><span class="line">                        .uri(<span class="string">&quot;http://www.bilibili.com&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置式：简化版，和全称</p>
<p>推荐使用</p>
<p><img src="https://pic1.imgdb.cn/item/677a2485d0e0a243d4ef1d22.png"></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">after_route</span> <span class="comment"># 就是一个名称，只要不跟别的路由冲突就行</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://localhost:8123/api/name/try</span>  <span class="comment"># 重定向地址</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br></pre></td></tr></table></figure>

<p>建议开启日志：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">org:</span></span><br><span class="line">      <span class="attr">springframework:</span></span><br><span class="line">        <span class="attr">cloud:</span></span><br><span class="line">          <span class="attr">gateway:</span> <span class="string">trace</span>  <span class="comment"># 控制日志级别，都输出。</span></span><br></pre></td></tr></table></figure>

<p>设置权重：</p>
<p><img src="https://pic1.imgdb.cn/item/677a2854d0e0a243d4ef1dca.png"></p>
<p>分成通一组，若请求10次，会有8次走上面的，2次走下面的。</p>
<h4 id="断言参数（predicates）"><a href="#断言参数（predicates）" class="headerlink" title="断言参数（predicates）"></a>断言参数（predicates）</h4><ol>
<li>After在xx时间之后</li>
<li>Before在xx时间之前</li>
<li>Between在xx时间之间</li>
<li>请求类别</li>
<li>请求头（包含Cookie）</li>
<li>查询参数</li>
<li>访问客户端地址</li>
<li>权重</li>
</ol>
<h4 id="过滤器（filters）"><a href="#过滤器（filters）" class="headerlink" title="过滤器（filters）"></a>过滤器（filters）</h4><p>作用：对请求头，响应头，请求参数，请求地址，进行增删改查。</p>
<p><img src="https://pic1.imgdb.cn/item/677a29c2d0e0a243d4ef1df8.png"></p>
<ol>
<li><p>AddRequestHeader&#x3D;zhang,shui  添加请求头</p>
</li>
<li><p>AddRequestParameter&#x3D;name,blue 添加请求参数</p>
</li>
<li><p>DeduperesponseHeader  去重</p>
</li>
<li><p>CircuitBreaker   断路器，请求降级，需要引入包</p>
<p><code>spring-cloud-starter-circuitbreaker-reactor-resilience4j</code>,  降级就是一个备选方案，当接口访问不通是，会转向。</p>
</li>
<li><p>MapRequestHeader 做映射添加新请求头</p>
</li>
<li><p>PrefixPath 添加前缀</p>
</li>
<li><p>PreserveHostHeader 保持host不变</p>
</li>
<li><p>RedirectTo 重定向。</p>
</li>
<li><p>RemoveRequestHeader 移除请求头</p>
</li>
<li><p>RemoveResponseHeader 移除响应头</p>
</li>
<li><p>RemoveRequestParameter 删除请求参数</p>
</li>
<li><p>RequestHeaderSize 限制请求的大小（请求保护）</p>
</li>
<li><p>重试处理器（可以学一下）</p>
</li>
</ol>
<p>基本功能：</p>
<p>1. </p>
<h4 id="配置http超时"><a href="#配置http超时" class="headerlink" title="配置http超时"></a>配置http超时</h4><p><img src="https://pic1.imgdb.cn/item/677a307bd0e0a243d4ef1fda.png"></p>
<h4 id="跨域配置"><a href="#跨域配置" class="headerlink" title="跨域配置"></a>跨域配置</h4><p><img src="https://pic1.imgdb.cn/item/677a30c9d0e0a243d4ef1feb.png"></p>
<h4 id="可以尝试看一下小代码式例。"><a href="#可以尝试看一下小代码式例。" class="headerlink" title="可以尝试看一下小代码式例。"></a>可以尝试看一下小代码式例。</h4><p>通过阅读代码来了解geteway编程式开发。</p>
<h2 id="第五期"><a href="#第五期" class="headerlink" title="第五期"></a>第五期</h2><p>业务流程</p>
<p><img src="https://pic1.imgdb.cn/item/677b228fd0e0a243d4ef56bc.png"></p>
<ol>
<li>实现统一的用户鉴权，统一的接口调用次数统计（把API网关应用到项目当中）</li>
<li>完善功能</li>
</ol>
<h3 id="要用到的特性"><a href="#要用到的特性" class="headerlink" title="要用到的特性"></a>要用到的特性</h3><ol>
<li>路由（转发请求到模拟接口项目）</li>
<li>负载均衡（需要用到注册中心）</li>
<li>统一鉴权（accessKey,secreKey)</li>
<li>跨域</li>
<li>统一的业务处理（每次请求接口后，接口调用次数+1）</li>
<li>访问控制（黑白名单）</li>
<li>发布控制（灰度发布）</li>
<li>流量染色（记录请求是否为网关）（或用来链路追踪）</li>
<li>接口保护<ul>
<li>限制请求</li>
<li>信息脱敏</li>
<li>降级（熔断）</li>
<li>限流：学习令牌桶算法</li>
<li>超时时间</li>
</ul>
</li>
<li>统一日志（记录每次的接口响应）</li>
<li>统一文档</li>
</ol>
<h3 id="业务逻辑"><a href="#业务逻辑" class="headerlink" title="业务逻辑"></a>业务逻辑</h3><ol>
<li>用户发送请求请求到API网关</li>
<li>请求日志</li>
<li>（黑白名单）</li>
<li>API对用户鉴权（判断ak，sk是否合法）</li>
<li>判断请求的接口是否存在</li>
<li>请求转发，调用模拟接口</li>
<li>响应日志</li>
<li>调用成功，接口次数+1</li>
<li>调用失败，返回一个规范的错误码</li>
</ol>
<h3 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h3><p><strong>1. 请求转发</strong></p>
<p>使用前缀匹配断言</p>
<p>所有路径为：&#x2F;api&#x2F;** 的请求进行转发，到<a target="_blank" rel="noopener" href="http://localhost:8123/api//*/">http://localhost:8123/api/\*\</a>*</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">httpclient:</span> <span class="comment"># ??????</span></span><br><span class="line">        <span class="attr">connect-timeout:</span> <span class="number">1000</span></span><br><span class="line">        <span class="attr">response-timeout:</span> <span class="string">5s</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">after_route</span> <span class="comment"># ???????????????????</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://localhost:8123/api/</span>  <span class="comment"># ?????</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">AddRequestHeader=zhang,shuaiqi</span></span><br></pre></td></tr></table></figure>

<p> <strong>2. 业务逻辑</strong></p>
<p>设置全局过滤器：<code>GlobalFilters</code> 所有的网关都会走这个过滤器</p>
<p>全局请求拦截处理（类似AOP）</p>
<p>由于网关项目没引入MyBatis等操作数库的类库，如果该操作较为复杂，可以有backend增删改查项目提供接口，我们直接调用，不用重复写逻辑了。</p>
<p>方法：</p>
<ul>
<li>Http请求（用HTTpClient，用RestTemplate，Feign）</li>
<li>RPC（Dubbo）</li>
</ul>
<p><strong>3. 问题</strong></p>
<p>网关的 <code>Mono</code> 类是一个异步操作。</p>
<p>预期是等模拟接口调用完成，才记录响应日志，统计接口次数。</p>
<p>但现实是chain。filter方法立克返回了，知道filter过滤器 return后才调用了模拟接口。</p>
<p>原因： chainfilter是一个异步操作，</p>
<p>解决方案： 利用response装饰者，增强原有response的处理能力。</p>
<h2 id="第六期"><a href="#第六期" class="headerlink" title="第六期"></a>第六期</h2><h3 id="计划"><a href="#计划" class="headerlink" title="计划"></a>计划</h3><ol>
<li>补充完整的网关的业务逻辑（怎么去操作数据库，怎么复用之前的方法。</li>
<li>完善系统，开发一个监控统计功能。</li>
</ol>
<h3 id="网关业务逻辑"><a href="#网关业务逻辑" class="headerlink" title="网关业务逻辑"></a>网关业务逻辑</h3><p>问题：网关项目比较纯净可没有操作数据库的包，并且还调用我们之前写过的代码。</p>
<p>理想：直接请求到其他项目的方法。</p>
<h3 id="怎么调用其他项目的方法"><a href="#怎么调用其他项目的方法" class="headerlink" title="怎么调用其他项目的方法"></a>怎么调用其他项目的方法</h3><ol>
<li>复制代码和依赖，环境</li>
<li>HTTP请求（提供一个接口，供其他项目调用）</li>
<li>RPC </li>
<li>打个jar包，其他项目去引用。（客户端SDK项目）</li>
</ol>
<h3 id="HTTP-请求怎么调用"><a href="#HTTP-请求怎么调用" class="headerlink" title="HTTP 请求怎么调用"></a>HTTP 请求怎么调用</h3><ol>
<li>提供方开发一个接口（地址，请求方法，参数，返回值）</li>
<li>调用方使用HTTPClient之类的代码包去发送HTTP请求。</li>
</ol>
<h3 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h3><p><strong>作用：像调用本地方法一样调用远程方法。</strong></p>
<p>对开发者更透明，减少了很多的沟通成本。</p>
<p><strong>RPC向远程发送请求时，未必要使用HTTP协议。</strong>比如还可以用TCP&#x2F;IP.(内部服务更适用)</p>
<p><strong>RPC框架运行结构</strong></p>
<p><img src="https://pic1.imgdb.cn/item/677b9933d0e0a243d4efc47e.png"></p>
<p><strong>Dubbo框架（RPC实现）</strong></p>
<p>GRPC，TRPC</p>
<p>最好的学习方式：阅读官方文档：<a target="_blank" rel="noopener" href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/quick-start/starter/">https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/quick-start/starter/</a></p>
<p>注意：Dubbo底层用的是 Triple 协议</p>
<p><strong>两种方式</strong></p>
<ul>
<li>Spring Boot代码（注解式）:写java的接口，服务提供者和消费者去引用这个接口。</li>
<li>IDL（接口调用语法）</li>
</ul>
<p><strong>示例项目学习</strong><br>zookeeper 注册中心：通过内嵌的方式更方便。</p>
<p>先启动注册中心，在启动服务提供者，最后启动消费者。</p>
<h4 id="整合运用"><a href="#整合运用" class="headerlink" title="整合运用"></a>整合运用</h4><ol>
<li>管理后端项目作为服务提供者</li>
<li>消费者通过远程调用来调用服务。</li>
</ol>
<p>整合Nacos</p>
<p><a target="_blank" rel="noopener" href="https://nacos.io/docs/latest/quickstart/quick-start/?spm=5238cd80.1f77ca18.0.0.4d31e37eKJh0wV">https://nacos.io/docs/latest/quickstart/quick-start/?spm=5238cd80.1f77ca18.0.0.4d31e37eKJh0wV</a></p>
<p>启动：</p>
<p>startup.cmd -m standalone</p>
<p>控制台：</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1:8848/nacos">http://127.0.0.1:8848/nacos</a></p>
<p>关闭：</p>
<p>shutdown.cmd</p>
<p>注意：</p>
<ol>
<li>服务接口类必须在同一个包下，建议是抽象出一个公共项目（放接口实体类）</li>
<li>设置注解（比如启动类的 EnableDubbo,接口实现类和bean引用注解）</li>
<li>添加配置（nacos）</li>
</ol>
<h2 id="第七期"><a href="#第七期" class="headerlink" title="第七期"></a>第七期</h2><h3 id="开启远程调用"><a href="#开启远程调用" class="headerlink" title="开启远程调用"></a>开启远程调用</h3><p>注意！！！！！</p>
<p>在使用dubbo时，必须确保服务者和消费者提供的类的包路径相同。不然会报错。</p>
<p>流程</p>
<p>服务端：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Dubbo Nacos registry dependency --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.nacos<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nacos-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>引入这两个包，并配置dubbo</p>
<p>配置信息如下：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dubbo:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo-springboot-demo-provider</span></span><br><span class="line">  <span class="attr">protocol:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">-1</span> <span class="comment"># 这里-1表示自动检测端口，直到不占用。</span></span><br><span class="line">  <span class="attr">registry:</span></span><br><span class="line">    <span class="attr">id:</span> <span class="string">nacos-registry</span></span><br><span class="line">    <span class="attr">address:</span> <span class="string">nacos://localhost:8848</span></span><br></pre></td></tr></table></figure>

<p>在主类下完成注解配置：<br><img src="https://pic1.imgdb.cn/item/677faa47d0e0a243d4f2bd26.png"></p>
<p>需要提供的方法写上注解 @DubboService</p>
<p><img src="https://pic1.imgdb.cn/item/677faa77d0e0a243d4f2bd6a.png"></p>
<p>消费者：</p>
<p>在启动类填写@EnableDubbo：</p>
<p><img src="https://pic1.imgdb.cn/item/677faae3d0e0a243d4f2be70.png"></p>
<p>注意下面的注解 @DubboReference，提供了远程调用功能。</p>
<h3 id="开始业务"><a href="#开始业务" class="headerlink" title="开始业务"></a>开始业务</h3><ol>
<li>完成网关业务逻辑</li>
<li>开发管理员分析功能</li>
<li>上线</li>
</ol>
<h4 id="网关的业务逻辑"><a href="#网关的业务逻辑" class="headerlink" title="网关的业务逻辑"></a>网关的业务逻辑</h4><ol>
<li>实际情况应该是去数据库中查是否分配给用户密钥（ak，sk）<ol>
<li>先根据accessKey判断用户是否存在，查到secretKey</li>
<li>对别secreKey和用户加密后的secretKey是否一致；</li>
</ol>
</li>
<li>网关：从数据库查询模拟接口是否存在，以及请求方法是否分配（还可以校验请求参数）</li>
<li>todo调用成功，接口调用次数 +1 invokeCount</li>
</ol>
<p><strong>问题： 如何获取接口转发服务的地址</strong></p>
<p>网关启动时，获取所有的接口信息，维护到内存hashmap中； 有请求时，根据请求的url路径或其他参数（比如host请求头）来判断应该转发到哪台服务器。</p>
<h4 id="公共服务"><a href="#公共服务" class="headerlink" title="公共服务"></a>公共服务</h4><p>让方法实体类在多个项目中复用，重复编写</p>
<ol>
<li>从数据库中查是否已分配给其他用户（ak，返回用户信息，布尔）</li>
<li>从数据库中查询模拟接口是否存在（请求路径，请求方法，请求参数，布尔）</li>
<li>接口调用次数+1（ak，sk（标识用户），请求接口参数）</li>
</ol>
<p>创建一个公共类：</p>
<ol>
<li>创建一个公共项目</li>
<li>将model中的数据复制在公共类里面，只保留公共依赖</li>
<li>在将这个项目打包（这样就可以在其他项目里面调用实体类了（若无需自动配置，不需要META-INFO&#x2F;spring.factories</li>
<li>抽取实体类实体类，创建自己的接口。</li>
<li>install本地maven包</li>
<li>让服务提供者引入commen包，测试是否正常运行。</li>
<li>让服务消费者引入common包，测试是否正常运行。</li>
<li>将包引入对应项目后，删除项目原有的包</li>
<li>引入包后，在主类直接编写接口实现类，通过调用其他类。</li>
<li>使用dubbo时，直接在实体类里面引入注解@DubboService，就可以通过接口注入。</li>
</ol>
<p>注意：在网关使用可以尝试禁用数据库</p>
<p><img src="https://pic1.imgdb.cn/item/678083e4d0e0a243d4f2e00c.png"></p>
<p>扩展</p>
<ol>
<li>怎么让其他用户也上传接口，让用户输入自己的host（服务器地址），接口信息，遵循咱们的要求（并使用咱们的sdk），</li>
<li>在接入时，平台需要测试这个接口，保证他是正常的。</li>
<li>可以尝试在请求路径加入host属性。</li>
</ol>
<p> 完成后端的项目代码情况</p>
<h3 id="开发统计分析"><a href="#开发统计分析" class="headerlink" title="开发统计分析"></a>开发统计分析</h3><h4 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h4><p>接口的总调用次数占比，从而分析出哪些接口没有人用。</p>
<p>接口a： 2次</p>
<p>接口b： 3次</p>
<h4 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h4><p>后端就是写一个接口，得到接口调用接口的次数占比。</p>
<p>从而分析出哪些接口没人用，高频接口增加资源或提高收费。</p>
<ol>
<li>查询调用数据</li>
<li>关联查询接口信息</li>
</ol>
<p>前端：展示饼图</p>
<p>一定要用现成的库，</p>
<p>ECharts（推荐），AntV，BizChars</p>
<p>用法很简单，</p>
<ol>
<li>看官网</li>
<li>进入示例页面</li>
<li>找到你要的图</li>
<li>在线调试</li>
<li>复制代码</li>
<li>改为真实数据</li>
</ol>
<h3 id="上线"><a href="#上线" class="headerlink" title="上线"></a>上线</h3><p>前端： 参考之前用户中心或伙伴匹配的上线方式</p>
<p>后端：</p>
<ul>
<li>backend项目： web项目，部署spring boot 的jar包</li>
<li>interface模拟接口项目： web项目，部署spring boot jar包</li>
<li>gateway网关项目：web项目，部署springboot的jar包</li>
</ul>
<p>单个服务器部署这三个项目就足够</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol>
<li>网关的流量染色，api接口的染色鉴定。<br>  在请求头中加入判定条件 （完成）</li>
<li>完成签到功能和积分获取<br>  设置新的数据表，并通过定时器来获取连续登录天数</li>
<li>接口项初始化</li>
<li>在注册用户后进行，所有接口初始化，（考虑到可以使用异步执行)</li>
<li>积分对接口次数的转化<br>  积分购买次数</li>
<li>充值积分（微信）<br>  支付获取积分</li>
<li>可能会使用新的表日志，来记录签到积分来源。</li>
<li>mysql优化</li>
<li>锁优化</li>
<li>网关的响应处</li>
</ol>
<h3 id="接口更新"><a href="#接口更新" class="headerlink" title="接口更新"></a>接口更新</h3><p>可能用到锁和事务</p>
<h3 id="完成签到功能"><a href="#完成签到功能" class="headerlink" title="完成签到功能"></a>完成签到功能</h3><p>表设计</p>
<p>接口信息</p>
<p>id 签到id</p>
<p>userid bigint</p>
<p>signIn int</p>
<p>integral bigint</p>
<p>isDelete </p>
<p>createTime</p>
<p>updateTime</p>
<p>完成</p>
<p>后续优化可能遇到锁？</p>
<h3 id="积分转化成接口次数"><a href="#积分转化成接口次数" class="headerlink" title="积分转化成接口次数"></a>积分转化成接口次数</h3><p>(出现了循环依赖问题 )</p>
<p>   userSignInfoController<br>┌─────┐<br>|  userSignInfoServiceImpl</p>
<p>spring.main.allow-circular-references&#x3D;true 暂时用这个解决了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/31/%E8%A1%8C%E5%8A%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/111.png">
      <meta itemprop="name" content="ZhangYuHao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang'Blog">
      <meta itemprop="description" content="一个小人物的个人博客">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang'Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/12/31/%E8%A1%8C%E5%8A%A8/" class="post-title-link" itemprop="url">行动</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-12-31 22:27:39 / 修改时间：22:38:31" itemprop="dateCreated datePublished" datetime="2024-12-31T22:27:39+08:00">2024-12-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index"><span itemprop="name">项目</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="时间线"><a href="#时间线" class="headerlink" title="时间线"></a>时间线</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/31/%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/111.png">
      <meta itemprop="name" content="ZhangYuHao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang'Blog">
      <meta itemprop="description" content="一个小人物的个人博客">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang'Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/12/31/%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A02/" class="post-title-link" itemprop="url">测试文章2</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-12-31 22:09:11 / 修改时间：22:12:06" itemprop="dateCreated datePublished" datetime="2024-12-31T22:09:11+08:00">2024-12-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="这是一篇测试文章"><a href="#这是一篇测试文章" class="headerlink" title="这是一篇测试文章"></a>这是一篇测试文章</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/31/%E6%96%87%E7%AB%A0%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/111.png">
      <meta itemprop="name" content="ZhangYuHao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang'Blog">
      <meta itemprop="description" content="一个小人物的个人博客">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang'Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/12/31/%E6%96%87%E7%AB%A0%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">文章测试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-12-31 22:04:15 / 修改时间：22:05:03" itemprop="dateCreated datePublished" datetime="2024-12-31T22:04:15+08:00">2024-12-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="这是一盘"><a href="#这是一盘" class="headerlink" title="这是一盘"></a>这是一盘</h1><p>aaaa</p>
<p>ccv</p>
<p>vzdasd</p>
<p>dsfasdf</p>
<p>ss</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/31/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/111.png">
      <meta itemprop="name" content="ZhangYuHao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang'Blog">
      <meta itemprop="description" content="一个小人物的个人博客">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang'Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/12/31/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-12-31 19:39:03" itemprop="dateCreated datePublished" datetime="2024-12-31T19:39:03+08:00">2024-12-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">ZhangYuHao</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
